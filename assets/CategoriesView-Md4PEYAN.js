import{_ as w}from"./SubPageLayout-COpeyFEM.js";import{_ as h,X as N}from"./Modal-CCnMvtw-.js";import{_ as $}from"./TextField-BOWSJA-R.js";import{_ as E}from"./RadioField-CcmG9W-2.js";import{r as b,z as S,a as v,o as d,w as C,e as i,b as r,m as x,G as F,u as _,t as f,P as D,k as y,F as M,l as T,p as O,I as B,f as V,g as L,i as q}from"./index-BgZwY917.js";import{T as j}from"./trash-2-BGJQpE67.js";import{_ as z,P as A}from"./FAB-BHB0aomp.js";const I={class:"my-4 flex gap-2 justify-around"},U="categories",P={__name:"Form",props:{category:{type:Object,default:null}},emits:["close"],setup(n,{emit:c}){const u=n,m=c,a={id:null,name:"",budget:0,type:"Expense"},t=b({...a});S(()=>u.category,l=>{l!=null&&l.id?t.value={...l}:t.value={...a}},{immediate:!0});const p=async l=>{var o;l.preventDefault();const s=JSON.parse(JSON.stringify(t.value));s.id||delete s.id;const e=await F(U,s);e.success?((o=document.querySelector("#manage-categories-form"))==null||o.close(),m("close")):console.error(e.error)};return(l,s)=>(d(),v(h,{id:"manage-categories-form",modalTitle:`${t.value.id?"Edit":"Add a"} Category`,isForm:"",submit:p,closeLabel:"Cancel"},{default:C(()=>[i($,{label:"Name",modelValue:t.value.name,"onUpdate:modelValue":s[0]||(s[0]=e=>t.value.name=e),modelModifiers:{trim:!0},noMaxW:"",required:"",placeholder:"Groceries, Salary...",maxLength:"50"},null,8,["modelValue"]),r("div",I,[i(E,{modelValue:t.value.type,"onUpdate:modelValue":s[1]||(s[1]=e=>t.value.type=e),value:"Expense",name:"category-type"},null,8,["modelValue"]),i(E,{modelValue:t.value.type,"onUpdate:modelValue":s[2]||(s[2]=e=>t.value.type=e),value:"Income",name:"category-type"},null,8,["modelValue"])]),t.value.type=="Expense"?(d(),v($,{key:0,label:"Budget (Optional)",modelValue:t.value.budget,"onUpdate:modelValue":s[3]||(s[3]=e=>t.value.budget=e),type:"number",steps:"0.01",min:"0",placeholder:"0.00"},null,8,["modelValue"])):x("",!0)]),_:1},8,["modalTitle"]))}},R={class:"mt-2 mb-4 text-center"},G={class:"text-center text-balance mb-2"},J={class:"font-bold text-center text-balance"},W="categories",X={__name:"DeleteForm",props:{category:{type:Object,default:null}},emits:["close"],setup(n,{emit:c}){const u=n,m=c,a=async t=>{var p;t.preventDefault(),u.category&&(await D(W,u.category.id),(p=document.querySelector("#delete-category-form"))==null||p.close(),m("close"))};return(t,p)=>(d(),v(h,{id:"delete-category-form",modalTitle:"Delete Category",formButtonLabel:"Confirm",isForm:"",isDanger:"",submit:a,closeLabel:"Cancel"},{default:C(()=>{var l,s;return[r("p",R,[i(_(j),{size:"54",class:"inline-block text-error"})]),r("p",G," Are you sure you want to delete this "+f((l=n.category)==null?void 0:l.type)+" category? ",1),r("p",J,f((s=n.category)==null?void 0:s.name),1)]}),_:1}))}},H={class:"list bg-base-100 rounded-box shadow-md mb-6"},K={class:"p-4 pb-2 text-xs opacity-60 tracking-wide"},Q=["onClick"],Y={key:0,class:"text-xs uppercase font-semibold text-warning"},Z=["onClick"],ee={key:0},te={class:"p-2"},oe={class:"alert alert-warning alert-soft"},k={__name:"List",props:["categories","type"],emits:["form","delete"],setup(n){return(c,u)=>{var m;return d(),y("ul",H,[r("li",K,f(n.type),1),(d(!0),y(M,null,T(n.categories,a=>(d(),y("li",{class:"list-row flex justify-between",key:a.id},[r("div",{onClick:t=>c.$emit("form",a),class:"flex flex-col justify-center w-full"},[r("div",null,f(a.name),1),a.type=="Expense"?(d(),y("div",Y,f(_(O)(a.budget)||"No Budget Set"),1)):x("",!0)],8,Q),r("button",{class:"btn btn-square btn-sm btn-ghost text-error",onClick:t=>c.$emit("delete",a)},[i(_(N),{size:"16"})],8,Z)]))),128)),(m=n.categories)!=null&&m.length?x("",!0):(d(),y("li",ee,[r("div",te,[r("div",oe,[i(_(B),{size:"16"}),r("span",null,"No "+f(n.type.toLowerCase())+" categories yet",1)])])]))])}}},se="categories",me={__name:"CategoriesView",setup(n){const c=b([]),u=b(null),m=async()=>{c.value=await q(se)},a=(e=null)=>{var o;u.value=e,(o=document.querySelector("#manage-categories-form"))==null||o.showModal()},t=e=>{var o;u.value=e,(o=document.querySelector("#delete-category-form"))==null||o.showModal()},p=()=>{m()},l=V(()=>c.value.filter(e=>e.type==="Income").sort((e,o)=>e.name.localeCompare(o.name))),s=V(()=>c.value.filter(e=>e.type==="Expense").sort((e,o)=>e.name.localeCompare(o.name)));return L(()=>{m()}),(e,o)=>(d(),v(w,{pageTitle:"Categories",isSubNav:""},{default:C(()=>[i(k,{type:"Income",categories:l.value,onForm:o[0]||(o[0]=g=>a(g)),onDelete:o[1]||(o[1]=g=>t(g))},null,8,["categories"]),i(k,{type:"Expense",categories:s.value,onForm:o[2]||(o[2]=g=>a(g)),onDelete:o[3]||(o[3]=g=>t(g))},null,8,["categories"]),i(z,{icon:_(A),onClick:a},null,8,["icon"]),i(P,{category:u.value,onClose:p},null,8,["category"]),i(X,{category:u.value,onClose:p},null,8,["category"])]),_:1}))}};export{me as default};
