import{_ as h}from"./SubPageLayout-B3-WoMAL.js";import{c as M,r as b,a as T,o as y,w as f,b as e,e as a,u,k as v,m as $,F as S,d as o,t as E,M as w,N as R,O as N,g as _,i as B,H,W as O,I as P}from"./index-DdCkdZKa.js";import{_ as I}from"./Modal-BOXr7wYP.js";import{T as k}from"./trash-2-Dcd0ja54.js";import{B as U}from"./banknote-C6_lblGu.js";import{S as V}from"./star-DEyM8-mn.js";/**
 * @license lucide-vue-next v0.485.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const q=M("download",[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"7 10 12 15 17 10",key:"2ggqvy"}],["line",{x1:"12",x2:"12",y1:"15",y2:"3",key:"1vk2je"}]]);/**
 * @license lucide-vue-next v0.485.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const L=M("triangle-alert",[["path",{d:"m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3",key:"wmoenq"}],["path",{d:"M12 9v4",key:"juzpu7"}],["path",{d:"M12 17h.01",key:"p32p05"}]]);/**
 * @license lucide-vue-next v0.485.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const F=M("upload",[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"17 8 12 3 7 8",key:"t8dd8p"}],["line",{x1:"12",x2:"12",y1:"3",y2:"15",key:"widbto"}]]),W={class:"mt-2 mb-4 text-center"},j={class:"my-2 text-center text-balance"},G={class:"text-error"},J={__name:"ResetCategory",props:{type:{type:String,default:""}},emits:["close"],setup(d,{emit:p}){const l=d,g=p,m=b(!1),n=[{name:"Salary",budget:0,type:"Income"},{name:"Bonus",budget:0,type:"Income"},{name:"Freelance",budget:0,type:"Income"},{name:"Business",budget:0,type:"Income"},{name:"Investment",budget:0,type:"Income"}],r=[{name:"Groceries",budget:0,type:"Expense"},{name:"Electricity",budget:0,type:"Expense"},{name:"Water",budget:0,type:"Expense"},{name:"Internet",budget:0,type:"Expense"},{name:"Phone Plan",budget:0,type:"Expense"},{name:"Rent",budget:0,type:"Expense"},{name:"Dining Out",budget:0,type:"Expense"},{name:"Breakfast",budget:0,type:"Expense"},{name:"Lunch",budget:0,type:"Expense"},{name:"Dinner",budget:0,type:"Expense"},{name:"Snacks",budget:0,type:"Expense"},{name:"Entertainment",budget:0,type:"Expense"},{name:"Digital Subscriptions",budget:0,type:"Expense"},{name:"Gaming Top-ups",budget:0,type:"Expense"},{name:"Personal Care",budget:0,type:"Expense"},{name:"Household Supplies",budget:0,type:"Expense"},{name:"Insurance",budget:0,type:"Expense"},{name:"Apparels",budget:0,type:"Expense"},{name:"Gadgets",budget:0,type:"Expense"},{name:"Appliances",budget:0,type:"Expense"},{name:"Withdrawal",budget:0,type:"Expense"}],s=async x=>{var i;x.preventDefault(),m.value=!0;try{if(l.type==="Income"||l.type==="Expense"){await w.categories.where("type").equals(l.type).delete();const D=l.type==="Income"?n:r;await w.categories.bulkAdd(D)}else l.type==="All"?(await w.categories.clear(),await w.categories.bulkAdd(n),await w.categories.bulkAdd(r)):l.type==="Clear"&&await w.categories.clear();(i=document.querySelector("#reset-category-modal"))==null||i.close(),g("close")}catch(D){console.error(`Failed to reset categories (${l.type}):`,D)}finally{m.value=!1}};return(x,i)=>(y(),T(I,{id:"reset-category-modal",modalTitle:`Reset ${d.type} Categories`,formButtonLabel:"Confirm",isForm:"",isDanger:"",submit:s,closeLabel:"Cancel"},{default:f(()=>[e("p",W,[a(u(k),{size:"54",class:"inline-block text-error"})]),e("p",j,[d.type==="Income"||d.type==="Expense"?(y(),v(S,{key:0},[i[0]||(i[0]=o(" Are you sure you want to reset all ")),e("strong",G,E(d.type),1),i[1]||(i[1]=o(" categories? This action will delete all existing categories of this type and replace them with default values. "))],64)):d.type==="All"?(y(),v(S,{key:1},[i[2]||(i[2]=o(" Are you sure you want to reset ")),i[3]||(i[3]=e("strong",{class:"text-error"},"all categories",-1)),i[4]||(i[4]=o("? This action will delete all categories and replace them with default values for income and expense. "))],64)):d.type==="Clear"?(y(),v(S,{key:2},[i[5]||(i[5]=o(" Are you sure you want to ")),i[6]||(i[6]=e("strong",{class:"text-error"},"clear all categories",-1)),i[7]||(i[7]=o("? This action will delete all categories without adding any default values. "))],64)):$("",!0)])]),_:1},8,["modalTitle"]))}},Y={class:"mt-2 mb-4 text-center"},K={__name:"ClearTransactions",emits:["close"],setup(d,{emit:p}){const l=p,g=b(!1),m=async n=>{var r;n.preventDefault(),g.value=!0;try{await w.transactions.clear(),(r=document.querySelector("#clear-transactions-modal"))==null||r.close(),l("close")}catch(s){console.error("Failed to clear transactions:",s)}finally{g.value=!1}};return(n,r)=>(y(),T(I,{id:"clear-transactions-modal",modalTitle:"Clear All Transactions",formButtonLabel:"Confirm",isForm:"",isDanger:"",submit:m,closeLabel:"Cancel"},{default:f(()=>[e("p",Y,[a(u(k),{size:"54",class:"inline-block text-error"})]),r[0]||(r[0]=e("p",{class:"my-2 text-center text-balance"},[o(" Are you sure you want to delete "),e("strong",{class:"text-error"},"all transactions"),o("? This action cannot be undone. Also, this will not update your accounts' current balances. ")],-1))]),_:1}))}},Q={class:"mt-2 mb-4 text-center"},X={key:0,class:"text-error text-center"},Z={key:1,class:"text-center my-4"},ee={__name:"Export",setup(d){const p=b(!1),l=b(null),g=async m=>{var n;m.preventDefault(),p.value=!0,l.value=null;try{const r=await R();if(!r.success)throw new Error(r.error||"Unknown error occurred during export.");(n=document.querySelector("#export-data-modal"))==null||n.close()}catch(r){console.error("Failed to export data:",r),l.value="An error occurred while exporting data."}finally{p.value=!1}};return(m,n)=>(y(),T(I,{id:"export-data-modal",modalTitle:"Export and Back up Data",formButtonLabel:"Export",isForm:"",submit:g},{default:f(()=>[e("p",Q,[a(u(F),{size:"54",class:"inline-block text-accent"})]),n[1]||(n[1]=e("p",{class:"text-center my-2"},[o(" This will export all your data from "),e("span",{class:"text-primary font-bold"},"Budgy"),o(" into a JSON file. You can use this file to back up your data and import later should you need to transfer it to a new device. ")],-1)),l.value?(y(),v("p",X,E(l.value),1)):$("",!0),p.value?(y(),v("div",Z,n[0]||(n[0]=[e("span",{class:"loading loading-spinner"},null,-1),o(" Exporting data... ")]))):$("",!0)]),_:1}))}},te={class:"mt-2 mb-4 text-center"},oe={key:0,class:"text-error text-center"},le={key:1,class:"text-center my-4"},ne={__name:"Import",setup(d){const p=b(!1),l=b(null),g=async m=>{var s;m.preventDefault();const n=document.querySelector("#import-file-input"),r=n==null?void 0:n.files[0];if(!r){l.value="Please select a valid JSON file.";return}p.value=!0,l.value=null;try{const x=await r.text(),i=await N(x);if(!i.success)throw new Error(i.error||"Unknown error occurred during import.");(s=document.querySelector("#import-data-modal"))==null||s.close()}catch(x){console.error("Failed to import data:",x),l.value="An error occurred while importing data. Please check the file format."}finally{p.value=!1}};return(m,n)=>(y(),T(I,{id:"import-data-modal",modalTitle:"Import and Restore Data",formButtonLabel:"Import",isForm:"",isDanger:"",submit:g},{default:f(()=>[e("p",te,[a(u(q),{size:"54",class:"inline-block text-accent"})]),n[1]||(n[1]=e("p",{class:"text-center my-2"},[o(" Upload a JSON file exported from "),e("span",{class:"text-primary font-bold"},"Budgy"),o(" to restore your data. This will "),e("span",{class:"text-error"},"replace all existing data"),o(" in the app. ")],-1)),n[2]||(n[2]=e("input",{id:"import-file-input",type:"file",accept:"application/json",class:"file-input file-input-primary w-full my-4",required:""},null,-1)),l.value?(y(),v("p",oe,E(l.value),1)):$("",!0),p.value?(y(),v("div",le,n[0]||(n[0]=[e("span",{class:"loading loading-spinner"},null,-1),o(" Importing data... ")]))):$("",!0)]),_:1}))}},ae={class:"mt-2 mb-4 text-center"},se={class:"my-2 text-center text-balance"},re={class:"text-error"},ie={__name:"ClearAccounts",props:{type:{type:String,default:""}},emits:["close"],setup(d,{emit:p}){const l=d,g=p,m=b(!1),n=async r=>{var s;r.preventDefault(),m.value=!0;try{l.type==="Debit"||l.type==="Credit"?await w.accounts.where("type").equals(l.type).delete():l.type==="All"&&await w.accounts.clear(),(s=document.querySelector("#clear-accounts-modal"))==null||s.close(),g("close")}catch(x){console.error(`Failed to clear accounts (${l.type}):`,x)}finally{m.value=!1}};return(r,s)=>(y(),T(I,{id:"clear-accounts-modal",modalTitle:`Clear ${d.type} Accounts`,formButtonLabel:"Confirm",isForm:"",isDanger:"",submit:n,closeLabel:"Cancel"},{default:f(()=>[e("p",ae,[a(u(k),{size:"54",class:"inline-block text-error"})]),e("p",se,[d.type==="Debit"||d.type==="Credit"?(y(),v(S,{key:0},[s[0]||(s[0]=o(" Are you sure you want to clear all ")),e("strong",re,E(d.type),1),s[1]||(s[1]=o(" accounts? This action will delete all existing accounts of this type. "))],64)):d.type==="All"?(y(),v(S,{key:1},[s[2]||(s[2]=o(" Are you sure you want to clear ")),s[3]||(s[3]=e("strong",{class:"text-error"},"all accounts",-1)),s[4]||(s[4]=o("? This action will delete all accounts. "))],64)):$("",!0)])]),_:1},8,["modalTitle"]))}},ue={class:"menu rounded-xl w-full [&_li>*]:rounded-lg mb-4 bg-white dark:bg-gray-900"},de={class:"badge badge-sm badge-secondary"},ce={class:"badge badge-sm badge-secondary"},pe={class:"badge badge-sm badge-secondary"},me={class:"menu rounded-xl w-full [&_li>*]:rounded-lg mb-4 bg-white dark:bg-gray-900"},ye={class:"menu rounded-xl w-full [&_li>*]:rounded-lg mb-4 bg-white dark:bg-gray-900"},ge={class:"menu rounded-xl w-full [&_li>*]:rounded-lg mb-4 bg-white dark:bg-gray-900"},be={class:"menu rounded-xl w-full [&_li>*]:rounded-lg mb-4 bg-white dark:bg-gray-900"},xe={class:"menu rounded-xl w-full [&_li>*]:rounded-lg mb-4 bg-white dark:bg-gray-900"},Ae={__name:"HomeView",setup(d){const p=b(0),l=b(0),g=b(0),m=b(null),n=b(null),r=async()=>{const c=await B("categories"),t=await B("accounts"),C=await B("favorites");p.value=(c==null?void 0:c.length)||0,l.value=(t==null?void 0:t.length)||0,g.value=(C==null?void 0:C.length)||0},s=c=>{var t;m.value=c,(t=document.querySelector("#reset-category-modal"))==null||t.showModal()},x=()=>{var c;(c=document.querySelector("#export-data-modal"))==null||c.showModal()},i=()=>{var c;(c=document.querySelector("#import-data-modal"))==null||c.showModal()},D=()=>{var c;(c=document.querySelector("#clear-transactions-modal"))==null||c.showModal()},z=c=>{var t;n.value=c,(t=document.querySelector("#clear-accounts-modal"))==null||t.showModal()};return _(()=>{r()}),(c,t)=>{const C=H("RouterLink");return y(),T(h,null,{default:f(()=>[t[21]||(t[21]=e("h2",{class:"font-semibold mb-1 text-secondary"},"App Data",-1)),e("ul",ue,[e("li",null,[a(C,{to:"/manage/categories"},{default:f(()=>[a(u(U),{size:16}),t[7]||(t[7]=o(" Categories ")),e("span",de,E(p.value),1)]),_:1})]),e("li",null,[a(C,{to:"/manage/accounts"},{default:f(()=>[a(u(O),{size:16}),t[8]||(t[8]=o(" Accounts ")),e("span",ce,E(l.value),1)]),_:1})]),e("li",null,[a(C,{to:"/manage/favorites"},{default:f(()=>[a(u(V),{size:16}),t[9]||(t[9]=o(" Favorites ")),e("span",pe,E(g.value),1)]),_:1})])]),t[22]||(t[22]=e("h2",{class:"font-semibold mb-1 text-secondary"},"Maintenance",-1)),e("ul",me,[e("li",null,[e("button",{onClick:x},[a(u(F),{size:16}),t[10]||(t[10]=o(" Export and Back up Data "))])]),e("li",null,[e("button",{onClick:i},[a(u(q),{size:16}),t[11]||(t[11]=o(" Import and Restore Data "))])])]),e("ul",ye,[e("li",null,[e("button",{class:"text-error",onClick:t[0]||(t[0]=A=>s("Income"))},[a(u(L),{size:16}),t[12]||(t[12]=o(" Reset Income Categories "))])]),e("li",null,[e("button",{class:"text-error",onClick:t[1]||(t[1]=A=>s("Expense"))},[a(u(L),{size:16}),t[13]||(t[13]=o(" Reset Expense Categories "))])]),e("li",null,[e("button",{class:"text-error",onClick:t[2]||(t[2]=A=>s("All"))},[a(u(L),{size:16}),t[14]||(t[14]=o(" Reset All Categories "))])]),e("li",null,[e("button",{class:"text-error",onClick:t[3]||(t[3]=A=>s("Clear"))},[a(u(k),{size:16}),t[15]||(t[15]=o(" Clear All Categories "))])])]),e("ul",ge,[e("li",null,[e("button",{class:"text-error",onClick:t[4]||(t[4]=A=>z("Debit"))},[a(u(k),{size:16}),t[16]||(t[16]=o(" Clear Debit Accounts "))])]),e("li",null,[e("button",{class:"text-error",onClick:t[5]||(t[5]=A=>z("Credit"))},[a(u(k),{size:16}),t[17]||(t[17]=o(" Clear Credit Accounts "))])]),e("li",null,[e("button",{class:"text-error",onClick:t[6]||(t[6]=A=>z("All"))},[a(u(k),{size:16}),t[18]||(t[18]=o(" Clear All Accounts "))])])]),e("ul",be,[e("li",null,[e("button",{class:"text-error",onClick:D},[a(u(k),{size:16}),t[19]||(t[19]=o(" Clear All Transactions "))])])]),e("ul",xe,[e("li",null,[a(C,{to:"/about"},{default:f(()=>[a(u(P),{size:16}),t[20]||(t[20]=o(" About "))]),_:1})])]),a(J,{type:m.value,onClose:r},null,8,["type"]),a(ee),a(ne),a(K,{onClose:r}),a(ie,{type:n.value,onClose:r},null,8,["type"])]),_:1})}}};export{Ae as default};
