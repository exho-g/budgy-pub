import{_ as R}from"./SubPageLayout-C6IGM3hH.js";import{y as F,r as f,c as A,o as g,w as b,f as e,i as n,u,p as C,v as T,F as z,g as o,t as E,R as v,S as h,T as N,k as H,m as L,H as P,W as U,J as V}from"./index-CV0fWcnN.js";import{_ as S}from"./Modal-D8YcX9D5.js";import{T as w}from"./trash-2-DxVy8LfI.js";import{B as J}from"./banknote-EKHUen45.js";import{S as O}from"./star-BV9TG5eg.js";import{T as B}from"./triangle-alert-D8IzT5fR.js";/**
 * @license lucide-vue-next v0.485.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const q=F("download",[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"7 10 12 15 17 10",key:"2ggqvy"}],["line",{x1:"12",x2:"12",y1:"15",y2:"3",key:"1vk2je"}]]);/**
 * @license lucide-vue-next v0.485.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const M=F("upload",[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"17 8 12 3 7 8",key:"t8dd8p"}],["line",{x1:"12",x2:"12",y1:"3",y2:"15",key:"widbto"}]]),W={class:"mt-2 mb-4 text-center"},G={class:"my-2 text-center text-balance"},j={class:"text-error"},Y={__name:"ResetCategory",props:{type:{type:String,default:""}},emits:["close"],setup(c,{emit:m}){const a=c,y=m,p=f(!1),l=[{name:"Salary",budget:0,type:"Income"},{name:"Bonus",budget:0,type:"Income"},{name:"Freelance",budget:0,type:"Income"},{name:"Business",budget:0,type:"Income"},{name:"Investment",budget:0,type:"Income"}],s=[{name:"Groceries",budget:0,type:"Expense"},{name:"Electricity",budget:0,type:"Expense"},{name:"Water",budget:0,type:"Expense"},{name:"Internet",budget:0,type:"Expense"},{name:"Phone Plan",budget:0,type:"Expense"},{name:"Rent",budget:0,type:"Expense"},{name:"Dining Out",budget:0,type:"Expense"},{name:"Breakfast",budget:0,type:"Expense"},{name:"Lunch",budget:0,type:"Expense"},{name:"Dinner",budget:0,type:"Expense"},{name:"Snacks",budget:0,type:"Expense"},{name:"Entertainment",budget:0,type:"Expense"},{name:"Digital Subscriptions",budget:0,type:"Expense"},{name:"Gaming Top-ups",budget:0,type:"Expense"},{name:"Personal Care",budget:0,type:"Expense"},{name:"Household Supplies",budget:0,type:"Expense"},{name:"Insurance",budget:0,type:"Expense"},{name:"Apparels",budget:0,type:"Expense"},{name:"Gadgets",budget:0,type:"Expense"},{name:"Appliances",budget:0,type:"Expense"},{name:"Withdrawal",budget:0,type:"Expense"}],r=async x=>{var i;x.preventDefault(),p.value=!0;try{if(a.type==="Income"||a.type==="Expense"){await v.categories.where("type").equals(a.type).delete();const D=a.type==="Income"?l:s;await v.categories.bulkAdd(D)}else a.type==="All"?(await v.categories.clear(),await v.categories.bulkAdd(l),await v.categories.bulkAdd(s)):a.type==="Clear"&&await v.categories.clear();(i=document.querySelector("#reset-category-modal"))==null||i.close(),y("close")}catch(D){console.error(`Failed to reset categories (${a.type}):`,D)}finally{p.value=!1}};return(x,i)=>(g(),A(S,{id:"reset-category-modal",modalTitle:`Reset ${c.type} Categories`,formButtonLabel:"Confirm",isForm:"",isDanger:"",submit:r,closeLabel:"Cancel"},{default:b(()=>[e("p",W,[n(u(w),{size:"54",class:"inline-block text-error"})]),e("p",G,[c.type==="Income"||c.type==="Expense"?(g(),C(z,{key:0},[i[0]||(i[0]=o(" Are you sure you want to reset all ")),e("strong",j,E(c.type),1),i[1]||(i[1]=o(" categories? This action will delete all existing categories of this type and replace them with default values. "))],64)):c.type==="All"?(g(),C(z,{key:1},[i[2]||(i[2]=o(" Are you sure you want to reset ")),i[3]||(i[3]=e("strong",{class:"text-error"},"all categories",-1)),i[4]||(i[4]=o("? This action will delete all categories and replace them with default values for income and expense. "))],64)):c.type==="Clear"?(g(),C(z,{key:2},[i[5]||(i[5]=o(" Are you sure you want to ")),i[6]||(i[6]=e("strong",{class:"text-error"},"clear all categories",-1)),i[7]||(i[7]=o("? This action will delete all categories without adding any default values. "))],64)):T("",!0)])]),_:1},8,["modalTitle"]))}},K={class:"mt-2 mb-4 text-center"},Q={__name:"ClearTransactions",emits:["close"],setup(c,{emit:m}){const a=m,y=f(!1),p=async l=>{var s;l.preventDefault(),y.value=!0;try{await v.transactions.clear(),(s=document.querySelector("#clear-transactions-modal"))==null||s.close(),a("close")}catch(r){console.error("Failed to clear transactions:",r)}finally{y.value=!1}};return(l,s)=>(g(),A(S,{id:"clear-transactions-modal",modalTitle:"Clear All Transactions",formButtonLabel:"Confirm",isForm:"",isDanger:"",submit:p,closeLabel:"Cancel"},{default:b(()=>[e("p",K,[n(u(w),{size:"54",class:"inline-block text-error"})]),s[0]||(s[0]=e("p",{class:"my-2 text-center text-balance"},[o(" Are you sure you want to delete "),e("strong",{class:"text-error"},"all transactions"),o("? This action cannot be undone. Also, this will not update your accounts' current balances. ")],-1))]),_:1}))}},X={class:"mt-2 mb-4 text-center"},Z={key:0,class:"text-error text-center"},ee={key:1,class:"text-center my-4"},te={__name:"Export",setup(c){const m=f(!1),a=f(null),y=async p=>{var l;p.preventDefault(),m.value=!0,a.value=null;try{const s=await h();if(!s.success)throw new Error(s.error||"Unknown error occurred during export.");(l=document.querySelector("#export-data-modal"))==null||l.close()}catch(s){console.error("Failed to export data:",s),a.value="An error occurred while exporting data."}finally{m.value=!1}};return(p,l)=>(g(),A(S,{id:"export-data-modal",modalTitle:"Export and Back up Data",formButtonLabel:"Export",isForm:"",submit:y},{default:b(()=>[e("p",X,[n(u(M),{size:"54",class:"inline-block text-accent"})]),l[1]||(l[1]=e("p",{class:"text-center my-2"},[o(" This will export all your data from "),e("span",{class:"text-primary font-bold"},"Budgy"),o(" into a JSON file. You can use this file to back up your data and import later should you need to transfer it to a new device. ")],-1)),a.value?(g(),C("p",Z,E(a.value),1)):T("",!0),m.value?(g(),C("div",ee,l[0]||(l[0]=[e("span",{class:"loading loading-spinner"},null,-1),o(" Exporting data... ")]))):T("",!0)]),_:1}))}},oe={class:"mt-2 mb-4 text-center"},le={key:0,class:"text-error text-center"},ae={key:1,class:"text-center my-4"},se={__name:"Import",setup(c){const m=f(!1),a=f(null),y=async p=>{var r;p.preventDefault();const l=document.querySelector("#import-file-input"),s=l==null?void 0:l.files[0];if(!s){a.value="Please select a valid JSON file.";return}m.value=!0,a.value=null;try{const x=await s.text(),i=await N(x);if(!i.success)throw new Error(i.error||"Unknown error occurred during import.");(r=document.querySelector("#import-data-modal"))==null||r.close()}catch(x){console.error("Failed to import data:",x),a.value="An error occurred while importing data. Please check the file format."}finally{m.value=!1}};return(p,l)=>(g(),A(S,{id:"import-data-modal",modalTitle:"Import and Restore Data",formButtonLabel:"Import",isForm:"",isDanger:"",submit:y},{default:b(()=>[e("p",oe,[n(u(q),{size:"54",class:"inline-block text-accent"})]),l[1]||(l[1]=e("p",{class:"text-center my-2"},[o(" Upload a JSON file exported from "),e("span",{class:"text-primary font-bold"},"Budgy"),o(" to restore your data. This will "),e("span",{class:"text-error"},"replace all existing data"),o(" in the app. ")],-1)),l[2]||(l[2]=e("input",{id:"import-file-input",type:"file",accept:"application/json",class:"file-input file-input-primary w-full my-4",required:""},null,-1)),a.value?(g(),C("p",le,E(a.value),1)):T("",!0),m.value?(g(),C("div",ae,l[0]||(l[0]=[e("span",{class:"loading loading-spinner"},null,-1),o(" Importing data... ")]))):T("",!0)]),_:1}))}},ne={class:"mt-2 mb-4 text-center"},re={class:"my-2 text-center text-balance"},ie={class:"text-error"},ue={__name:"ClearAccounts",props:{type:{type:String,default:""}},emits:["close"],setup(c,{emit:m}){const a=c,y=m,p=f(!1),l=async s=>{var r;s.preventDefault(),p.value=!0;try{a.type==="Debit"||a.type==="Credit"?await v.accounts.where("type").equals(a.type).delete():a.type==="All"&&await v.accounts.clear(),(r=document.querySelector("#clear-accounts-modal"))==null||r.close(),y("close")}catch(x){console.error(`Failed to clear accounts (${a.type}):`,x)}finally{p.value=!1}};return(s,r)=>(g(),A(S,{id:"clear-accounts-modal",modalTitle:`Clear ${c.type} Accounts`,formButtonLabel:"Confirm",isForm:"",isDanger:"",submit:l,closeLabel:"Cancel"},{default:b(()=>[e("p",ne,[n(u(w),{size:"54",class:"inline-block text-error"})]),e("p",re,[c.type==="Debit"||c.type==="Credit"?(g(),C(z,{key:0},[r[0]||(r[0]=o(" Are you sure you want to clear all ")),e("strong",ie,E(c.type),1),r[1]||(r[1]=o(" accounts? This action will delete all existing accounts of this type. "))],64)):c.type==="All"?(g(),C(z,{key:1},[r[2]||(r[2]=o(" Are you sure you want to clear ")),r[3]||(r[3]=e("strong",{class:"text-error"},"all accounts",-1)),r[4]||(r[4]=o("? This action will delete all accounts. "))],64)):T("",!0)])]),_:1},8,["modalTitle"]))}},de={class:"mt-2 mb-4 text-center"},ce={__name:"ClearFavorites",emits:["close"],setup(c,{emit:m}){const a=m,y=f(!1),p=async l=>{var s;l.preventDefault(),y.value=!0;try{await v.favorites.clear(),(s=document.querySelector("#clear-favorites-modal"))==null||s.close(),a("close")}catch(r){console.error("Failed to clear favorites:",r)}finally{y.value=!1}};return(l,s)=>(g(),A(S,{id:"clear-favorites-modal",modalTitle:"Clear All Saved Templates",formButtonLabel:"Confirm",isForm:"",isDanger:"",submit:p,closeLabel:"Cancel"},{default:b(()=>[e("p",de,[n(u(w),{size:"54",class:"inline-block text-error"})]),s[0]||(s[0]=e("p",{class:"my-2 text-center text-balance"},[o(" Are you sure you want to delete "),e("strong",{class:"text-error"},"all saved templates"),o("? This action cannot be undone. ")],-1))]),_:1}))}},me={class:"menu rounded-xl w-full [&_li>*]:rounded-lg mb-4 bg-white dark:bg-gray-900"},pe={class:"badge badge-sm badge-secondary"},ye={class:"badge badge-sm badge-secondary"},ge={class:"badge badge-sm badge-secondary"},fe={class:"menu rounded-xl w-full [&_li>*]:rounded-lg mb-4 bg-white dark:bg-gray-900"},be={class:"menu rounded-xl w-full [&_li>*]:rounded-lg mb-4 bg-white dark:bg-gray-900"},xe={class:"menu rounded-xl w-full [&_li>*]:rounded-lg mb-4 bg-white dark:bg-gray-900"},ve={class:"menu rounded-xl w-full [&_li>*]:rounded-lg mb-4 bg-white dark:bg-gray-900"},we={class:"menu rounded-xl w-full [&_li>*]:rounded-lg mb-4 bg-white dark:bg-gray-900"},Ce={class:"menu rounded-xl w-full [&_li>*]:rounded-lg mb-4 bg-white dark:bg-gray-900"},ze={__name:"HomeView",setup(c){const m=f(0),a=f(0),y=f(0),p=f(null),l=f(null),s=async()=>{const d=await L("categories"),t=await L("accounts"),k=await L("favorites");m.value=(d==null?void 0:d.length)||0,a.value=(t==null?void 0:t.length)||0,y.value=(k==null?void 0:k.length)||0},r=d=>{var t;p.value=d,(t=document.querySelector("#reset-category-modal"))==null||t.showModal()},x=()=>{var d;(d=document.querySelector("#export-data-modal"))==null||d.showModal()},i=()=>{var d;(d=document.querySelector("#import-data-modal"))==null||d.showModal()},D=()=>{var d;(d=document.querySelector("#clear-transactions-modal"))==null||d.showModal()},I=d=>{var t;l.value=d,(t=document.querySelector("#clear-accounts-modal"))==null||t.showModal()},_=()=>{var d;(d=document.querySelector("#clear-favorites-modal"))==null||d.showModal()};return H(()=>{s()}),(d,t)=>{const k=P("RouterLink");return g(),A(R,null,{default:b(()=>[t[22]||(t[22]=e("h2",{class:"font-semibold mb-1 text-secondary"},"App Data",-1)),e("ul",me,[e("li",null,[n(k,{to:"/manage/categories"},{default:b(()=>[n(u(J),{size:16}),t[7]||(t[7]=o(" Categories ")),e("span",pe,E(m.value),1)]),_:1})]),e("li",null,[n(k,{to:"/manage/accounts"},{default:b(()=>[n(u(U),{size:16}),t[8]||(t[8]=o(" Accounts ")),e("span",ye,E(a.value),1)]),_:1})]),e("li",null,[n(k,{to:"/manage/favorites"},{default:b(()=>[n(u(O),{size:16}),t[9]||(t[9]=o(" Favorites ")),e("span",ge,E(y.value),1)]),_:1})])]),t[23]||(t[23]=e("h2",{class:"font-semibold mb-1 text-secondary"},"Maintenance",-1)),e("ul",fe,[e("li",null,[e("button",{onClick:x},[n(u(M),{size:16}),t[10]||(t[10]=o(" Export and Back up Data "))])]),e("li",null,[e("button",{onClick:i},[n(u(q),{size:16}),t[11]||(t[11]=o(" Import and Restore Data "))])])]),e("ul",be,[e("li",null,[e("button",{class:"text-error",onClick:t[0]||(t[0]=$=>r("Income"))},[n(u(B),{size:16}),t[12]||(t[12]=o(" Reset Income Categories "))])]),e("li",null,[e("button",{class:"text-error",onClick:t[1]||(t[1]=$=>r("Expense"))},[n(u(B),{size:16}),t[13]||(t[13]=o(" Reset Expense Categories "))])]),e("li",null,[e("button",{class:"text-error",onClick:t[2]||(t[2]=$=>r("All"))},[n(u(B),{size:16}),t[14]||(t[14]=o(" Reset All Categories "))])]),e("li",null,[e("button",{class:"text-error",onClick:t[3]||(t[3]=$=>r("Clear"))},[n(u(w),{size:16}),t[15]||(t[15]=o(" Clear All Categories "))])])]),e("ul",xe,[e("li",null,[e("button",{class:"text-error",onClick:t[4]||(t[4]=$=>I("Debit"))},[n(u(w),{size:16}),t[16]||(t[16]=o(" Clear Debit Accounts "))])]),e("li",null,[e("button",{class:"text-error",onClick:t[5]||(t[5]=$=>I("Credit"))},[n(u(w),{size:16}),t[17]||(t[17]=o(" Clear Credit Accounts "))])]),e("li",null,[e("button",{class:"text-error",onClick:t[6]||(t[6]=$=>I("All"))},[n(u(w),{size:16}),t[18]||(t[18]=o(" Clear All Accounts "))])])]),e("ul",ve,[e("li",null,[e("button",{class:"text-error",onClick:_},[n(u(w),{size:16}),t[19]||(t[19]=o(" Clear All Saved Templates "))])])]),e("ul",we,[e("li",null,[e("button",{class:"text-error",onClick:D},[n(u(w),{size:16}),t[20]||(t[20]=o(" Clear All Transactions "))])])]),e("ul",Ce,[e("li",null,[n(k,{to:"/about"},{default:b(()=>[n(u(V),{size:16}),t[21]||(t[21]=o(" About "))]),_:1})])]),n(Y,{type:p.value,onClose:s},null,8,["type"]),n(te),n(se),n(Q,{onClose:s}),n(ue,{type:l.value,onClose:s},null,8,["type"]),n(ce,{onClose:s})]),_:1})}}};export{ze as default};
