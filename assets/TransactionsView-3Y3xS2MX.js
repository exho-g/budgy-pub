import{c as J,q as K,s as X,k as c,o as i,v as F,d as $,x as Q,b as l,y as Z,t as y,f as L,r as I,p as V,z as ee,A as te,a as q,w as D,m as C,e as v,B as R,u as f,I as P,n as M,D as A,F as S,l as j,E as le,G as ae,H as ne,J as se,g as oe,_ as re,h as ie,i as _,C as ue,j as de}from"./index-CvJCmTcD.js";import{_ as O}from"./Modal-CVwSb8le.js";import{_ as W}from"./TextField-CP-1NCxw.js";import{_ as ce}from"./SelectField-DRYfb3B_.js";import{f as E,W as me}from"./dateUtils-DLvv1uTU.js";import{B as ye}from"./banknote-GEQMMHuc.js";import{P as Y,X as H,_ as pe}from"./FAB-DfqKyMJw.js";import{S as B}from"./star-Dmdai1vT.js";/**
 * @license lucide-vue-next v0.485.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const be=J("minus",[["path",{d:"M5 12h14",key:"1ays0h"}]]);/**
 * @license lucide-vue-next v0.485.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ve=J("wallet-minimal",[["path",{d:"M17 14h.01",key:"7oqj8z"}],["path",{d:"M7 7h12a2 2 0 0 1 2 2v10a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h14",key:"u1rqew"}]]),ge={class:"flex items-center gap-2"},fe=["value"],xe={__name:"CheckboxField",props:K({label:{type:String,default:null},value:{type:String,default:""}},{modelValue:{},modelModifiers:{}}),emits:["update:modelValue"],setup(o){const h=X(o,"modelValue");return(m,x)=>(i(),c("label",ge,[F(l("input",Z({type:"checkbox","onUpdate:modelValue":x[0]||(x[0]=g=>h.value=g),class:"checkbox checkbox-sm checkbox-primary",value:o.value},m.$attrs),null,16,fe),[[Q,h.value]]),$(" "+y(o.label??o.value),1)]))}},ke={class:"mt-4 mb-6"},he={key:0,class:"alert alert-soft alert-warning mt-4"},$e={class:"grid grid-cols-2 text-center"},Ce={key:0,class:"mb-4"},we=["value"],Ie={key:1,role:"alert",class:"alert alert-warning alert-soft"},Me={class:"grid grid-cols-2 text-center mb-4"},Te={key:2,role:"alert",class:"alert alert-warning alert-soft"},Fe={key:3,class:"my-4 text-center"},De={class:"alert alert-soft"},Se={class:"flex justify-center items-center gap-6 mt-6"},Ve=["disabled"],Le={class:"text-center w-3/12"},qe=["disabled"],Ae={class:"my-4 text-sm text-center"},Ee={__name:"Form",props:{transaction:{type:Object,default:null},categories:{type:Array,default:[]},accounts:{type:Array,default:[]}},emits:["close"],setup(o,{emit:h}){const m=o,x=h,g=L(()=>{var a;return(a=m.categories)==null?void 0:a.filter(e=>e.type===t.value.type).slice().sort((e,s)=>e.name.localeCompare(s.name)).map(e=>({label:e.name,value:e.id}))}),p=L(()=>{var e,s;let a=(s=(e=m.accounts)==null?void 0:e.slice())==null?void 0:s.filter(r=>{var b;return((b=m.transaction)==null?void 0:b.ccId)!==r.id&&r.type===t.value.cardType}).sort((r,b)=>r.type===b.type?r.name.localeCompare(b.name):r.type.localeCompare(b.type)).map(r=>({label:`${r.name} / ${r.type} ${V(r.type=="Debit"?r.amount:r.creditLimit-r.balance)}`,value:r.id}));return[{label:"Out Source / Cash",value:""},...a]}),d={id:null,amount:null,type:"Expense",time:E(new Date),categoryId:"",cardType:"Credit",accountId:"",label:"",isCCPay:!1,ccId:null,isInstallment:!1,installmentId:null,installmentMonths:3,installmentPosition:0},t=I({...d});ee(()=>m.transaction,a=>{a!=null&&a.id?t.value={...a,time:E(a.time)}:a!=null&&a.isFavorite?(delete a.isFavorite,t.value={...a,time:E(new Date)}):t.value={...d}},{immediate:!0});const n=async a=>{var r;a.preventDefault(),t.value.time=E(t.value.time);const e=JSON.parse(JSON.stringify(t.value));e.id||delete e.id;const s=await le(e);s.success?((r=document.querySelector("#transaction-form-modal"))==null||r.close(),x("close")):console.error(s.error)};return(a,e)=>{const s=te("RouterLink");return i(),q(O,{id:"transaction-form-modal",modalTitle:`${t.value.id?"Edit":"Add"} Transaction`,isForm:"",submit:n,closeLabel:"Cancel",additionalClasses:"max-w-none w-full h-full rounded-none",additionalSlotClasses:"max-h-[100dvh] pb-10dvh",addBottomActionsPadding:""},{default:D(()=>{var r,b;return[l("div",ke,[F(l("input",{id:"transaction-amount","onUpdate:modelValue":e[0]||(e[0]=u=>t.value.amount=u),type:"number",step:"0.01",placeholder:"0.00",required:"",class:"text-center w-full font-bold text-5xl outline-none",min:"0.01"},null,512),[[R,t.value.amount]]),e[14]||(e[14]=l("p",{class:"text-center -mt-3"},[l("label",{for:"transaction-amount",class:"font-bold inline-block text-secondary"},"Amount")],-1))]),t.value.id&&t.value.isInstallment?(i(),c("div",he,[v(f(P),{size:"16"}),e[15]||(e[15]=l("span",null,[$("You are editing an installment transaction. Changing the "),l("strong",null,"Time"),$(" will set this is the starting of installment (1st month).")],-1))])):C("",!0),l("div",$e,[l("label",{class:M(["cursor-pointer font-bold text-md border-2 border-red-500 rounded-xl rounded-r-none border-r-0 py-2",{"bg-linear-to-r from-red-900 to-red-600 text-white":t.value.type==="Expense","bg-transparent text-red-500":t.value.type!=="Expense"}])},[v(f(ye),{size:24,class:"inline opacity-75"}),e[16]||(e[16]=l("span",{class:"block"},"Expense",-1)),F(l("input",{type:"radio","onUpdate:modelValue":e[1]||(e[1]=u=>t.value.type=u),value:"Expense",class:"hidden"},null,512),[[A,t.value.type]])],2),l("label",{class:M(["cursor-pointer font-bold text-md border-2 border-green-500 rounded-xl rounded-l-none border-l-0 py-2",{"bg-linear-to-l from-green-900 to-green-600 text-white":t.value.type==="Income","bg-transparent text-green-500":t.value.type!=="Income"}])},[v(f(ve),{size:24,class:"inline opacity-75"}),e[17]||(e[17]=l("span",{class:"block"},"Income",-1)),F(l("input",{type:"radio","onUpdate:modelValue":e[2]||(e[2]=u=>t.value.type=u),value:"Income",class:"hidden"},null,512),[[A,t.value.type]])],2)]),t.value.isCCPay?C("",!0):(i(),c(S,{key:1},[e[21]||(e[21]=l("p",{class:"mt-8 mb-4 font-bold text-primary"},"Category",-1)),(r=g.value)!=null&&r.length?(i(),c("div",Ce,[(i(!0),c(S,null,j(g.value,u=>(i(),c("label",{key:u.value,class:M(["cursor-pointer text-sm inline-block p-1 border border-gray-300 mr-2 mb-2 rounded transition-colors",{"border-secondary bg-secondary":t.value.categoryId===u.value}])},[l("span",{class:M(t.value.categoryId===u.value?"text-white":"")},y(u.label),3),F(l("input",{type:"radio","onUpdate:modelValue":e[3]||(e[3]=T=>t.value.categoryId=T),value:u.value,class:"w-0 h-0 opacity-0",required:""},null,8,we),[[A,t.value.categoryId]])],2))),128))])):(i(),c("div",Ie,[v(f(P)),l("span",null,[e[19]||(e[19]=$("There's no categories yet. ")),v(s,{to:"/manage/categories",class:"link"},{default:D(()=>e[18]||(e[18]=[$("Tap here to add")])),_:1}),e[20]||(e[20]=$("."))])]))],64)),e[32]||(e[32]=l("p",{class:"mt-8 mb-2 font-bold text-primary"},"Account Type",-1)),l("div",Me,[l("label",{class:M(["cursor-pointer font-bold text-sm border-2 border-gray-500 rounded-xl rounded-r-none border-r-0 py-2",{"bg-linear-to-r from-gray-900 to-gray-600 text-white":t.value.cardType==="Credit","bg-transparent text-gray-500":t.value.cardType!=="Credit"}])},[e[22]||(e[22]=l("span",{class:"block"},"Credit",-1)),F(l("input",{type:"radio","onUpdate:modelValue":e[4]||(e[4]=u=>t.value.cardType=u),value:"Credit",class:"hidden"},null,512),[[A,t.value.cardType]])],2),l("label",{class:M(["cursor-pointer font-bold text-sm border-2 border-gray-500 rounded-xl rounded-l-none border-l-0 py-2",{"bg-linear-to-l from-gray-900 to-gray-600 text-white":t.value.cardType==="Debit","bg-transparent text-gray-500":t.value.cardType!=="Debit"}])},[e[23]||(e[23]=l("span",{class:"block"},"Debit",-1)),F(l("input",{type:"radio","onUpdate:modelValue":e[5]||(e[5]=u=>t.value.cardType=u),value:"Debit",class:"hidden"},null,512),[[A,t.value.cardType]])],2)]),(b=p.value)!=null&&b.length?C("",!0):(i(),c("div",Te,[v(f(P)),l("span",null,[e[25]||(e[25]=$("There's no accounts yet. ")),v(s,{to:"/manage/accounts",class:"link"},{default:D(()=>e[24]||(e[24]=[$("Tap here to add")])),_:1}),e[26]||(e[26]=$("."))])])),v(ce,{label:"Account",modelValue:t.value.accountId,"onUpdate:modelValue":e[6]||(e[6]=u=>t.value.accountId=u),options:p.value,required:""},null,8,["modelValue","options"]),v(W,{label:"Time",modelValue:t.value.time,"onUpdate:modelValue":e[7]||(e[7]=u=>t.value.time=u),type:"datetime-local",required:""},null,8,["modelValue"]),t.value.isCCPay?C("",!0):(i(),c("div",Fe,[v(xe,{class:"inline-flex",label:"This transaction is installment",modelValue:t.value.isInstallment,"onUpdate:modelValue":e[8]||(e[8]=u=>t.value.isInstallment=u),disabled:!!t.value.id},null,8,["modelValue","disabled"])])),t.value.isInstallment?(i(),c(S,{key:4},[l("div",De,[v(f(P),{size:"16"}),e[27]||(e[27]=l("span",null,[$("For installment, please indicate the monthly payment in the "),l("strong",{class:"text-secondary"},"Amount"),$(" field above as this is the one which will be copied for the succeeding months.")],-1))]),l("div",Se,[l("div",null,[l("span",{class:"btn btn-soft btn-primary btn-circle",disabled:t.value.installmentMonths<=2?!0:null,onClick:e[9]||(e[9]=()=>{t.value.installmentMonths>2&&t.value.installmentMonths--})},[v(f(be))],8,Ve)]),l("div",Le,[F(l("input",{type:"number","onUpdate:modelValue":e[10]||(e[10]=u=>t.value.installmentMonths=u),class:"font-bold text-4xl outline-none text-center w-full",required:"",min:"2",max:"999",onKeyup:e[11]||(e[11]=()=>{t.value.installmentMonths<2?t.value.installmentMonths=2:t.value.installmentMonths>999&&(t.value.installmentMonths=999)})},null,544),[[R,t.value.installmentMonths]]),e[28]||(e[28]=l("small",{class:"font-bold block -mt-1"},"Months",-1))]),l("div",null,[l("span",{class:"btn btn-soft btn-primary btn-circle",disabled:t.value.installmentMonths>=999?!0:null,onClick:e[12]||(e[12]=()=>{t.value.installmentMonths<999&&t.value.installmentMonths++})},[v(f(Y))],8,qe)])]),l("p",Ae,[e[29]||(e[29]=l("strong",{class:"text-primary"},"Computation: ",-1)),e[30]||(e[30]=$()),e[31]||(e[31]=l("br",null,null,-1)),$(" "+y(f(V)(t.value.amount)+" x "+(t.value.installmentMonths||1)+" months = ")+" ",1),l("strong",null,y(f(V)((t.value.amount||0)*(t.value.installmentMonths||1))),1)])],64)):C("",!0),v(W,{label:"Label",modelValue:t.value.label,"onUpdate:modelValue":e[13]||(e[13]=u=>t.value.label=u),placeholder:"Label / Comment"},null,8,["modelValue"])]}),_:1},8,["modalTitle"])}}},Oe={class:"mt-4 p-2 rounded-lg border-1 border-primary bg-primary/10"},ze={key:0,class:"text-center font-bold text-lg"},Ue={class:"text-center font-bold text-lg text-primary"},Pe={key:0,class:"opacity-50"},je={key:1,class:"text-center text-xs"},Ne={key:0,class:"mt-4 space-y-2"},_e={__name:"DeleteForm",props:{transaction:{type:Object,default:null}},emits:["close"],setup(o,{emit:h}){const m=o,x=h,g=async(p=!1)=>{var t;const d=await ae(m.transaction.id,p);d.success?((t=document.querySelector("#delete-transaction-modal"))==null||t.close(),x("close")):console.error(d.error)};return(p,d)=>{var t,n;return i(),q(O,{id:"delete-transaction-modal",modalTitle:"Delete Transaction",isDanger:"",isForm:!((t=o.transaction)!=null&&t.isInstallment),submit:(n=o.transaction)!=null&&n.isInstallment?null:g,formButtonLabel:"Confirm",closeLabel:"Cancel"},{default:D(()=>{var a,e,s,r,b,u,T,z,U;return[d[2]||(d[2]=l("p",{class:"text-center text-balance"},"Are you sure you want to delete this transaction?",-1)),l("div",Oe,[(a=o.transaction)!=null&&a.label?(i(),c("p",ze,y((e=o.transaction)==null?void 0:e.label),1)):C("",!0),l("p",Ue,[$(y(f(V)((s=o.transaction)==null?void 0:s.amount))+" ",1),(r=o.transaction)!=null&&r.isInstallment?(i(),c("small",Pe,"per month")):C("",!0)]),(b=o.transaction)!=null&&b.isInstallment?(i(),c("p",je,y(((u=o.transaction)==null?void 0:u.installmentPosition)+"/"+((T=o.transaction)==null?void 0:T.installmentMonths))+" month"+y(((z=o.transaction)==null?void 0:z.installmentMonths)>1?"s":""),1)):C("",!0)]),(U=o.transaction)!=null&&U.isInstallment?(i(),c("div",Ne,[l("button",{class:"text-error font-bold text-center w-full block",onClick:d[0]||(d[0]=N=>g(!0))}," Delete All Installments "),l("button",{class:"text-error font-bold text-center w-full block",onClick:d[1]||(d[1]=N=>g(!1))}," Delete This (and Future) Only ")])):C("",!0)]}),_:1},8,["isForm","submit"])}}},Be={key:0,class:"flex justify-center items-center h-32 py-64"},Re={key:1,class:"text-center pt-48"},We={class:"p-4 pb-2 tracking-wide"},Je={class:"badge badge-secondary badge-sm text-white"},Ye=["onClick"],He={key:0,class:"text-warning inline-block ml-1"},Ge={class:"text-xs font-semibold opacity-80"},Ke={class:"my-1"},Xe={key:0,class:"inline-block ml-1 opacity-70"},Qe=["onClick"],Ze=["onClick"],et={__name:"List",props:["transactions","isLoading","categories","accounts"],emits:["edit","delete","fetchData","favorite"],setup(o){const h=o,m=p=>{var d;return p?(d=h.accounts)==null?void 0:d.find(t=>t.id===p):null},x=p=>{var d;return p?(d=h.categories)==null?void 0:d.find(t=>t.id===p):null},g=L(()=>{const p={};return h.transactions.forEach(d=>{const t=E(d.time).split("T")[0];p[t]||(p[t]=[]),d.account=m(d.accountId),d.category=x(d.categoryId),p[t].push(d)}),p});return(p,d)=>(i(),c("div",null,[o.isLoading?(i(),c("div",Be,d[0]||(d[0]=[l("span",{class:"loading loading-spinner loading-xl loading-primary"},null,-1)]))):Object.keys(g.value).length===0?(i(),c("div",Re,[v(f(me),{size:"124",class:"inline-block text-gray-300"}),d[1]||(d[1]=l("p",{class:"text-gray-300 text-lg mt-2"},"No transactions this month",-1))])):(i(!0),c(S,{key:2},j(g.value,(t,n)=>(i(),c("ul",{class:"list bg-base-100 rounded-box shadow-md mb-6 dark:bg-gray-800",key:n},[l("li",We,[l("span",Je,y(new Date(n).toLocaleDateString("en-US",{month:"short",day:"numeric",year:"numeric"})),1)]),(i(!0),c(S,null,j(t,a=>{var e,s,r,b;return i(),c("li",{class:M(["list-row flex justify-between items-center gap-0",{"bg-green-50 dark:bg-green-800/30":a.isCCPay}]),key:a.id},[l("div",{onClick:u=>p.$emit("edit",a),class:"w-full"},[l("div",null,[l("span",{class:M(["font-bold",{"text-red-500":((e=a.category)==null?void 0:e.type)=="Expense","text-green-500":((s=a.category)==null?void 0:s.type)=="Income"}])},y(f(V)(a.amount)),3),a.isInstallment?(i(),c("span",He,"("+y(a.installmentPosition+"/"+a.installmentMonths)+" month"+y(a.installmentMonths>1?"s":"")+")",1)):C("",!0)]),l("div",Ge,[l("p",Ke,y(a.label),1),l("span",{class:M({"text-secondary":((r=a.account)==null?void 0:r.type)=="Debit","text-warning":((b=a.account)==null?void 0:b.type)=="Credit","text-error":!a.account})},y(a.account?a.account.name:"Out Source"),3),a.category?(i(),c("span",Xe,y(a.category.name),1)):C("",!0)])],8,Ye),!a.isInstallment&&!a.isCCPay?(i(),c("button",{key:0,class:"btn btn-square btn-sm btn-ghost text-warning",onClick:u=>p.$emit("favorite",a)},[v(f(B),{size:"16"})],8,Qe)):C("",!0),l("button",{class:"btn btn-square btn-sm btn-ghost text-error",onClick:u=>p.$emit("delete",a)},[v(f(H),{size:"16"})],8,Ze)],2)}),128))]))),128))]))}},tt={class:"py-4"},lt={class:"table"},at={key:1,class:"text-gray-500"},nt={__name:"Favorite",props:{transaction:{type:Object,default:null},accounts:{type:Array,default:[]},categories:{type:Array,default:[]}},emits:["close"],setup(o,{emit:h}){const m=o,x=h,g=L(()=>{var t,n;return(t=m.transaction)!=null&&t.accountId?(n=m.accounts)==null?void 0:n.find(a=>a.id===m.transaction.accountId):null}),p=L(()=>{var t,n;return(t=m.transaction)!=null&&t.categoryId?(n=m.categories)==null?void 0:n.find(a=>a.id===m.transaction.categoryId):null}),d=async()=>{var a,e,s,r,b,u,T;const t={label:(a=m.transaction)==null?void 0:a.label,amount:(e=m.transaction)==null?void 0:e.amount,type:(s=m.transaction)==null?void 0:s.type,categoryId:(r=m.transaction)==null?void 0:r.categoryId,cardType:(b=m.transaction)==null?void 0:b.cardType,accountId:(u=m.transaction)==null?void 0:u.accountId},n=await ne("favorites",t);n.success?((T=document.querySelector("#transaction-favorite-modal"))==null||T.close(),x("close")):console.error("Failed to save favorite:",n.error)};return(t,n)=>(i(),q(O,{id:"transaction-favorite-modal",isForm:"",submit:d,closeLabel:"Cancel",modalTitle:"Save Template"},{default:D(()=>{var a,e,s,r,b;return[l("div",tt,[l("table",lt,[l("tbody",null,[l("tr",null,[n[0]||(n[0]=l("th",{class:"text-left text-primary p-0"},"Label",-1)),n[1]||(n[1]=l("td",{class:"p-0"},":",-1)),l("td",null,[(a=o.transaction)!=null&&a.label?(i(),c(S,{key:0},[$(y((e=o.transaction)==null?void 0:e.label),1)],64)):(i(),c("span",at,"No Label"))])]),l("tr",null,[n[2]||(n[2]=l("th",{class:"text-left text-primary p-0"},"Amount",-1)),n[3]||(n[3]=l("td",{class:"p-0"},":",-1)),l("td",null,y(f(V)((s=o.transaction)==null?void 0:s.amount)),1)]),l("tr",null,[n[4]||(n[4]=l("th",{class:"text-left text-primary p-0"},"Transaction Type",-1)),n[5]||(n[5]=l("td",{class:"p-0"},":",-1)),l("td",null,y((r=o.transaction)==null?void 0:r.type),1)]),l("tr",null,[n[6]||(n[6]=l("th",{class:"text-left text-primary p-0"},"Category",-1)),n[7]||(n[7]=l("td",{class:"p-0"},":",-1)),l("td",null,y(p.value?`${p.value.name} (${p.value.type})`:"--"),1)]),l("tr",null,[n[8]||(n[8]=l("th",{class:"text-left text-primary p-0"},"Account Type",-1)),n[9]||(n[9]=l("td",{class:"p-0"},":",-1)),l("td",null,y((b=o.transaction)==null?void 0:b.cardType),1)]),l("tr",null,[n[10]||(n[10]=l("th",{class:"text-left text-primary p-0"},"Account",-1)),n[11]||(n[11]=l("td",{class:"p-0"},":",-1)),l("td",null,y(g.value?`${g.value.name} (${g.value.type})`:"Out Source"),1)])])])])]}),_:1}))}},st={class:"list bg-base-100 rounded-box border-1 border-gray-200 mb-6 mt-1"},ot={class:"flex gap-4 w-full"},rt=["onClick"],it={key:1,class:"text-gray-400"},ut={class:"flex gap-2 items-center mt-1"},dt={class:"text-xs font-semibold"},ct={key:1,class:"opacity-50"},mt=["onClick"],yt={key:0,class:"p-2"},pt={class:"alert alert-warning alert-soft"},bt={__name:"SelectFavorite",props:{favorites:{type:Array,default:[]},accounts:{type:Array,default:[]},categories:{type:Array,default:[]}},emits:["useFavorite","deleteFavorite"],setup(o,{emit:h}){const m=o,x=h,g=n=>{var a;return n?(a=m.accounts)==null?void 0:a.find(e=>e.id===n):null},p=n=>{var a;return n?(a=m.categories)==null?void 0:a.find(e=>e.id===n):null},d=L(()=>{const n=[];return m.favorites.forEach(a=>{a.account=g(a.accountId),a.category=p(a.categoryId),n.push(a)}),n.sort((a,e)=>{var s,r,b,u;return((s=a.category)==null?void 0:s.type)===((r=e.category)==null?void 0:r.type)?a.label.localeCompare(e.label):(((b=a.category)==null?void 0:b.type)||"").localeCompare(((u=e.category)==null?void 0:u.type)||"")})}),t=n=>{var a;x("useFavorite",n),(a=document.querySelector("#select-favorite-modal"))==null||a.close()};return(n,a)=>(i(),q(O,{id:"select-favorite-modal",modalTitle:"Select Template",closeLabel:"Cancel"},{default:D(()=>{var e;return[l("ul",st,[(i(!0),c(S,null,j(d.value,s=>(i(),c("li",{class:"list-row flex justify-between hover:bg-base-300 select-none",key:s.id},[l("div",ot,[l("div",{class:"flex-1",onClick:r=>t(s)},[l("div",null,[s.label?(i(),c(S,{key:0},[$(y(s.label),1)],64)):(i(),c("span",it,"No Label")),s.category?(i(),c("span",{key:2,class:M(["text-white ml-1",{"badge badge-sm badge-primary":s.type==="Income","badge badge-sm badge-error":s.type==="Expense"}])},y(`${s.category.name} (${s.type})`),3)):C("",!0)]),l("div",ut,[l("div",dt,[$(y(s.amount)+" ",1),s.account?(i(),c("span",{key:0,class:M({"text-warning":s.cardType==="Credit","text-secondary":s.cardType==="Debit"})},y(`${s.account.name} (${s.cardType})`),3)):(i(),c("span",ct,"Out Source"))])])],8,rt),l("button",{class:"btn btn-square btn-sm btn-ghost text-error ml-auto",onClick:r=>n.$emit("deleteFavorite",s)},[v(f(H),{size:"16"})],8,mt)])]))),128))]),(e=d.value)!=null&&e.length?C("",!0):(i(),c("div",yt,[l("div",pt,[l("span",null,[a[0]||(a[0]=$("No favorites available. Tap the ")),v(f(B),{class:"inline-block -mt-1",size:"16"}),a[1]||(a[1]=$(" button next to a transaction to add one. "))])])]))]}),_:1}))}},vt={class:"mt-4 p-2 rounded-lg border-1 border-primary bg-primary/10"},gt={key:0,class:"text-center font-bold text-lg"},ft={key:1,class:"text-center text-xs text-gray-500"},xt={key:2,class:"text-center text-xs text-gray-500"},kt={class:"text-center font-bold text-lg text-primary"},ht={__name:"DeleteFavoriteForm",props:{favorite:{type:Object,default:null}},emits:["deleted"],setup(o,{emit:h}){const m=o,x=h,g=I(!1),p=async()=>{var t,n;g.value=!0;const d=await se("favorites",m.favorite.id);g.value=!1,d.success?((t=document.querySelector("#delete-favorite-modal"))==null||t.close(),x("deleted")):(n=document.querySelector("#delete-favorite-modal"))==null||n.close()};return(d,t)=>(i(),q(O,{id:"delete-favorite-modal",modalTitle:"Delete Template",isDanger:"",isForm:!0,submit:p,formButtonLabel:"Confirm",closeLabel:"Cancel"},{default:D(()=>{var n,a,e,s,r,b,u;return[t[0]||(t[0]=l("p",{class:"text-center text-balance"},"Are you sure you want to delete this saved template?",-1)),l("div",vt,[(n=o.favorite)!=null&&n.label?(i(),c("p",gt,y((a=o.favorite)==null?void 0:a.label),1)):C("",!0),(s=(e=o.favorite)==null?void 0:e.category)!=null&&s.name?(i(),c("p",ft,y(o.favorite.category.name)+" ("+y(o.favorite.type)+") ",1)):C("",!0),(b=(r=o.favorite)==null?void 0:r.account)!=null&&b.name?(i(),c("p",xt,y(o.favorite.account.name)+" ("+y(o.favorite.cardType)+") ",1)):C("",!0),l("p",kt,y((u=o.favorite)==null?void 0:u.amount),1)])]}),_:1}))}},$t={class:"flex justify-between gap-4 items-center mb-4"},Ct={class:"text-lg font-bold"},Lt={__name:"TransactionsView",setup(o){const h=I([]),m=I([]),x=I([]),g=I(null),p=I([]),d=I(null),t=I(new Date().getMonth()),n=I(new Date().getFullYear()),a=I(!1),e=async(k=!1)=>{a.value=!0,h.value=await ie(n.value,t.value),k&&(m.value=await _("categories"),x.value=await _("accounts")),a.value=!1},s=async()=>{p.value=await _("favorites")},r=(k=null)=>{var w;g.value=k,(w=document.querySelector("#transaction-form-modal"))==null||w.showModal()},b=k=>{var w;g.value=k,(w=document.querySelector("#delete-transaction-modal"))==null||w.showModal()},u=k=>{var w;g.value=k,(w=document.querySelector("#transaction-favorite-modal"))==null||w.showModal()},T=()=>{var k;(k=document.querySelector("#select-favorite-modal"))==null||k.showModal()},z=k=>{var w;d.value=k,(w=document.querySelector("#delete-favorite-modal"))==null||w.showModal()},U=k=>{var w;g.value={label:k.label,amount:k.amount,type:k.type,categoryId:k.categoryId,cardType:k.cardType,accountId:k.accountId,installmentMonths:3,time:new Date().toISOString(),isFavorite:!0},(w=document.querySelector("#transaction-form-modal"))==null||w.showModal()},N=()=>{t.value===0?(t.value=11,n.value-=1):t.value-=1,e()},G=()=>{t.value===11?(t.value=0,n.value+=1):t.value+=1,e()};return oe(()=>{e(!0),s()}),(k,w)=>(i(),q(re,{pageTitle:"Transactions",bg:"bg-gray-100 dark:bg-gray-900"},{default:D(()=>[l("div",$t,[l("button",{class:"btn btn-xs btn-circle btn-soft btn-primary",onClick:N},[v(f(ue))]),l("h2",Ct,y(new Date(n.value,t.value).toLocaleString("default",{month:"long",year:"numeric"})),1),l("button",{class:"btn btn-xs btn-circle btn-soft btn-primary",onClick:G},[v(f(de))])]),v(et,{transactions:h.value,isLoading:a.value,categories:m.value,accounts:x.value,onEdit:r,onDelete:b,onFavorite:u},null,8,["transactions","isLoading","categories","accounts"]),v(pe,{icon:f(Y),onClick:r},null,8,["icon"]),l("button",{class:"btn btn-circle btn-secondary fixed bottom-34 shadow-secondary/50 shadow-md right-24 btn-sm",onClick:T},[v(f(B),{size:20,strokeWidth:"2"})]),v(Ee,{transaction:g.value,onClose:e,categories:m.value,accounts:x.value},null,8,["transaction","categories","accounts"]),v(_e,{transaction:g.value,onClose:e},null,8,["transaction"]),v(nt,{transaction:g.value,categories:m.value,accounts:x.value,onClose:s},null,8,["transaction","categories","accounts"]),v(bt,{favorites:p.value,accounts:x.value,categories:m.value,onUseFavorite:U,onDeleteFavorite:z},null,8,["favorites","accounts","categories"]),v(ht,{favorite:d.value,onDeleted:s},null,8,["favorite"])]),_:1}))}};export{Lt as default};
