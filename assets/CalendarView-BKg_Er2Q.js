import{r as p,j as h,k as N,c as V,w as Y,e as $,l as j,m as L,o as c,f as n,i as M,u as g,C as W,t as v,n as q,p as d,F as C,q as I,s as y,v as D,x as _}from"./index-CV0fWcnN.js";const z={class:"flex justify-between items-center mb-8"},G={class:"text-xl font-bold text-secondary"},O={class:"grid grid-cols-7"},P={key:1},R={key:2,class:"mt-auto"},A={key:0,class:"text-red-500 text-sm"},H={key:1,class:"text-green-500 text-sm"},J={class:"grid grid-cols-2 -mx-5 mt-8"},K={class:"bg-gradient-to-r from-green-800/30 to-[#d8dacf] dark:from-green-600/40 dark:to-[#242628] p-4 text-center"},Q={class:"font-bold text-green-800 dark:text-green-300 text-lg"},U={class:"bg-gradient-to-l from-red-800/30 to-[#d8dacf] dark:from-red-600/40 dark:to-[#242628] p-4 text-center"},X={class:"font-bold text-red-500 dark:text-red-300 text-lg"},te={__name:"CalendarView",setup(Z){const u=p(new Date),a=p(u.value.getMonth()),r=p(u.value.getFullYear()),m=p([]),f=p([]),b=async()=>{m.value=await j(r.value,a.value),f.value=await L("categories")},S=h(()=>new Date(r.value,a.value+1,0).getDate()),F=h(()=>new Date(r.value,a.value,1).getDay()),T=h(()=>{const i=[],o=S.value,t=F.value;for(let e=0;e<t;e++)i.push(null);for(let e=1;e<=o;e++)i.push(e);return i}),x=i=>{const o=`${r.value}-${String(a.value+1).padStart(2,"0")}-${String(i).padStart(2,"0")}`,t=m.value.filter(s=>{var l;return s.time.startsWith(o)&&((l=f.value.find(k=>k.id===s.categoryId))==null?void 0:l.type)==="Income"}).reduce((s,l)=>s+l.amount,0),e=m.value.filter(s=>{var l;return s.time.startsWith(o)&&((l=f.value.find(k=>k.id===s.categoryId))==null?void 0:l.type)==="Expense"}).reduce((s,l)=>s+l.amount,0);return{income:t,expense:e}},w=h(()=>{const i=m.value.filter(t=>{var e;return((e=f.value.find(s=>s.id===t.categoryId))==null?void 0:e.type)==="Income"}).reduce((t,e)=>t+e.amount,0),o=m.value.filter(t=>{var e;return((e=f.value.find(s=>s.id===t.categoryId))==null?void 0:e.type)==="Expense"}).reduce((t,e)=>t+e.amount,0);return{income:i,expense:o}}),B=()=>{a.value===0?(a.value=11,r.value-=1):a.value-=1,b()},E=()=>{a.value===11?(a.value=0,r.value+=1):a.value+=1,b()};return N(()=>{b()}),(i,o)=>(c(),V($,{pageTitle:"Calendar",bg:"bg-primary/5"},{default:Y(()=>[n("div",z,[n("button",{class:"btn btn-sm btn-circle btn-soft btn-primary",onClick:B},[M(g(W))]),n("h2",G,v(new Date(r.value,a.value).toLocaleString("default",{month:"long",year:"numeric"})),1),n("button",{class:"btn btn-sm btn-circle btn-soft btn-primary",onClick:E},[M(g(q))])]),n("div",O,[(c(),d(C,null,I(["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],(t,e)=>n("div",{class:y(["text-center font-bold pb-4",{"text-orange-500":e===0||e===6}]),key:t},v(t),3)),64)),(c(!0),d(C,null,I(T.value,(t,e)=>(c(),d("div",{key:e,class:y(["outline p-1 min-h-18 flex flex-col justify-between",{"bg-primary/10":t===u.value.getDate()&&a.value===u.value.getMonth()&&r.value===u.value.getFullYear(),"opacity-0":t===null,"outline-orange-500/10":(e%7===0||(e+1)%7===0)&&t!==null,"outline-gray-500/10":(e%7>=1||(e+1)%7<=6)&&t!==null}])},[t?(c(),d("div",{key:0,class:y(["text-right font-bold text-xs",{"text-orange-500":e%7===0||(e+1)%7===0,"text-primary":t===u.value.getDate()&&a.value===u.value.getMonth()&&r.value===u.value.getFullYear()}])},v(t),3)):(c(),d("div",P)),t?(c(),d("div",R,[x(t).expense>0?(c(),d("p",A,v(g(_)(x(t).expense,!0)),1)):D("",!0),x(t).income>0?(c(),d("p",H,v(g(_)(x(t).income,!0)),1)):D("",!0)])):D("",!0)],2))),128))]),n("div",J,[n("div",K,[n("p",Q,v(g(_)(w.value.income)),1),o[0]||(o[0]=n("p",{class:"text-green-800/80 dark:text-green-300 font-black"},"Income",-1))]),n("div",U,[n("p",X,v(g(_)(w.value.expense)),1),o[1]||(o[1]=n("p",{class:"text-red-500/80 dark:text-red-300 font-black"},"Expense",-1))])])]),_:1}))}};export{te as default};
