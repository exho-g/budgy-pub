import{r as f,d as x,e as N,c as V,w as Y,_ as $,g as j,f as L,o as u,a as n,h as M,u as g,C as W,t as v,i as z,j as d,F as C,k as I,n as D,l as w,m as _}from"./index-D_GMeJnk.js";const G={class:"flex justify-between items-center mb-8 mt-12"},O={class:"text-xl font-bold text-secondary"},P={class:"grid grid-cols-7"},R={key:1},q={key:2,class:"mt-auto"},A={key:0,class:"text-red-500 text-sm"},H={key:1,class:"text-green-500 text-sm"},J={class:"grid grid-cols-2 gap-2 mt-8"},K={class:"bg-gradient-to-t from-green-800 to-green-500 p-4 rounded-xl text-center"},Q={class:"font-bold text-white text-lg"},U={class:"bg-gradient-to-t from-red-800 to-red-500 p-4 rounded-xl text-center"},X={class:"font-bold text-white text-lg"},te={__name:"CalendarView",setup(Z){const c=f(new Date),a=f(c.value.getMonth()),l=f(c.value.getFullYear()),m=f([]),p=f([]),b=async()=>{m.value=await j(l.value,a.value),p.value=await L("categories")},S=x(()=>new Date(l.value,a.value+1,0).getDate()),F=x(()=>new Date(l.value,a.value,1).getDay()),T=x(()=>{const i=[],o=S.value,t=F.value;for(let e=0;e<t;e++)i.push(null);for(let e=1;e<=o;e++)i.push(e);return i}),h=i=>{const o=`${l.value}-${String(a.value+1).padStart(2,"0")}-${String(i).padStart(2,"0")}`,t=m.value.filter(s=>{var r;return s.time.startsWith(o)&&((r=p.value.find(y=>y.id===s.categoryId))==null?void 0:r.type)==="Income"}).reduce((s,r)=>s+r.amount,0),e=m.value.filter(s=>{var r;return s.time.startsWith(o)&&((r=p.value.find(y=>y.id===s.categoryId))==null?void 0:r.type)==="Expense"}).reduce((s,r)=>s+r.amount,0);return{income:t,expense:e}},k=x(()=>{const i=m.value.filter(t=>{var e;return((e=p.value.find(s=>s.id===t.categoryId))==null?void 0:e.type)==="Income"}).reduce((t,e)=>t+e.amount,0),o=m.value.filter(t=>{var e;return((e=p.value.find(s=>s.id===t.categoryId))==null?void 0:e.type)==="Expense"}).reduce((t,e)=>t+e.amount,0);return{income:i,expense:o}}),B=()=>{a.value===0?(a.value=11,l.value-=1):a.value-=1,b()},E=()=>{a.value===11?(a.value=0,l.value+=1):a.value+=1,b()};return N(()=>{b()}),(i,o)=>(u(),V($,{pageTitle:"Calendar",bg:"bg-primary/5"},{default:Y(()=>[n("div",G,[n("button",{class:"btn btn-sm btn-circle btn-soft btn-primary",onClick:B},[M(g(W))]),n("h2",O,v(new Date(l.value,a.value).toLocaleString("default",{month:"long",year:"numeric"})),1),n("button",{class:"btn btn-sm btn-circle btn-soft btn-primary",onClick:E},[M(g(z))])]),n("div",P,[(u(),d(C,null,I(["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],(t,e)=>n("div",{class:D(["text-center font-bold pb-4",{"text-orange-500":e===0||e===6}]),key:t},v(t),3)),64)),(u(!0),d(C,null,I(T.value,(t,e)=>(u(),d("div",{key:e,class:D(["outline p-1 min-h-18 flex flex-col justify-between",{"bg-primary/10":t===c.value.getDate()&&a.value===c.value.getMonth()&&l.value===c.value.getFullYear(),"opacity-0":t===null,"outline-orange-500/10":(e%7===0||(e+1)%7===0)&&t!==null,"outline-gray-500/10":(e%7>=1||(e+1)%7<=6)&&t!==null}])},[t?(u(),d("div",{key:0,class:D(["text-right font-bold text-xs",{"text-orange-500":e%7===0||(e+1)%7===0,"text-primary":t===c.value.getDate()&&a.value===c.value.getMonth()&&l.value===c.value.getFullYear()}])},v(t),3)):(u(),d("div",R)),t?(u(),d("div",q,[h(t).expense>0?(u(),d("p",A,v(g(_)(h(t).expense,!0)),1)):w("",!0),h(t).income>0?(u(),d("p",H,v(g(_)(h(t).income,!0)),1)):w("",!0)])):w("",!0)],2))),128))]),n("div",J,[n("div",K,[n("p",Q,v(g(_)(k.value.income)),1),o[0]||(o[0]=n("p",{class:"text-white/70"},"Income",-1))]),n("div",U,[n("p",X,v(g(_)(k.value.expense)),1),o[1]||(o[1]=n("p",{class:"text-white/70"},"Expense",-1))])])]),_:1}))}};export{te as default};
