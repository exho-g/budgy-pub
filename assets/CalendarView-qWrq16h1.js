import{r as p,f as _,g as N,a as V,w as Y,_ as $,h as j,i as L,o as c,b as n,e as M,u as g,C as W,t as v,j as z,k as d,F as C,l as I,n as D,m as k,p as x}from"./index-CvJCmTcD.js";const G={class:"flex justify-between items-center mb-8"},O={class:"text-xl font-bold text-secondary"},P={class:"grid grid-cols-7"},R={key:1},q={key:2,class:"mt-auto"},A={key:0,class:"text-red-500 text-sm"},H={key:1,class:"text-green-500 text-sm"},J={class:"grid grid-cols-2 mt-8 -mx-5"},K={class:"bg-gradient-to-r from-green-800/30 to-[#d8dacf] p-4 text-center"},Q={class:"font-bold text-green-800 text-lg"},U={class:"bg-gradient-to-l from-red-800/30 to-[#d8dacf] p-4 text-center"},X={class:"font-bold text-red-500 text-lg"},te={__name:"CalendarView",setup(Z){const u=p(new Date),a=p(u.value.getMonth()),l=p(u.value.getFullYear()),m=p([]),f=p([]),b=async()=>{m.value=await j(l.value,a.value),f.value=await L("categories")},S=_(()=>new Date(l.value,a.value+1,0).getDate()),F=_(()=>new Date(l.value,a.value,1).getDay()),T=_(()=>{const i=[],o=S.value,t=F.value;for(let e=0;e<t;e++)i.push(null);for(let e=1;e<=o;e++)i.push(e);return i}),h=i=>{const o=`${l.value}-${String(a.value+1).padStart(2,"0")}-${String(i).padStart(2,"0")}`,t=m.value.filter(s=>{var r;return s.time.startsWith(o)&&((r=f.value.find(y=>y.id===s.categoryId))==null?void 0:r.type)==="Income"}).reduce((s,r)=>s+r.amount,0),e=m.value.filter(s=>{var r;return s.time.startsWith(o)&&((r=f.value.find(y=>y.id===s.categoryId))==null?void 0:r.type)==="Expense"}).reduce((s,r)=>s+r.amount,0);return{income:t,expense:e}},w=_(()=>{const i=m.value.filter(t=>{var e;return((e=f.value.find(s=>s.id===t.categoryId))==null?void 0:e.type)==="Income"}).reduce((t,e)=>t+e.amount,0),o=m.value.filter(t=>{var e;return((e=f.value.find(s=>s.id===t.categoryId))==null?void 0:e.type)==="Expense"}).reduce((t,e)=>t+e.amount,0);return{income:i,expense:o}}),B=()=>{a.value===0?(a.value=11,l.value-=1):a.value-=1,b()},E=()=>{a.value===11?(a.value=0,l.value+=1):a.value+=1,b()};return N(()=>{b()}),(i,o)=>(c(),V($,{pageTitle:"Calendar",bg:"bg-primary/5"},{default:Y(()=>[n("div",G,[n("button",{class:"btn btn-sm btn-circle btn-soft btn-primary",onClick:B},[M(g(W))]),n("h2",O,v(new Date(l.value,a.value).toLocaleString("default",{month:"long",year:"numeric"})),1),n("button",{class:"btn btn-sm btn-circle btn-soft btn-primary",onClick:E},[M(g(z))])]),n("div",P,[(c(),d(C,null,I(["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],(t,e)=>n("div",{class:D(["text-center font-bold pb-4",{"text-orange-500":e===0||e===6}]),key:t},v(t),3)),64)),(c(!0),d(C,null,I(T.value,(t,e)=>(c(),d("div",{key:e,class:D(["outline p-1 min-h-18 flex flex-col justify-between",{"bg-primary/10":t===u.value.getDate()&&a.value===u.value.getMonth()&&l.value===u.value.getFullYear(),"opacity-0":t===null,"outline-orange-500/10":(e%7===0||(e+1)%7===0)&&t!==null,"outline-gray-500/10":(e%7>=1||(e+1)%7<=6)&&t!==null}])},[t?(c(),d("div",{key:0,class:D(["text-right font-bold text-xs",{"text-orange-500":e%7===0||(e+1)%7===0,"text-primary":t===u.value.getDate()&&a.value===u.value.getMonth()&&l.value===u.value.getFullYear()}])},v(t),3)):(c(),d("div",R)),t?(c(),d("div",q,[h(t).expense>0?(c(),d("p",A,v(g(x)(h(t).expense,!0)),1)):k("",!0),h(t).income>0?(c(),d("p",H,v(g(x)(h(t).income,!0)),1)):k("",!0)])):k("",!0)],2))),128))]),n("div",J,[n("div",K,[n("p",Q,v(g(x)(w.value.income)),1),o[0]||(o[0]=n("p",{class:"text-green-800/80 font-black"},"Income",-1))]),n("div",U,[n("p",X,v(g(x)(w.value.expense)),1),o[1]||(o[1]=n("p",{class:"text-red-500/80 font-black"},"Expense",-1))])])]),_:1}))}};export{te as default};
