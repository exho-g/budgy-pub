import{y as Y,z as Q,A as Z,p as d,o as r,B as D,g as f,D as ee,f as l,E as te,t as y,j as V,r as I,x as L,G as R,H,c as q,w as F,v as C,i as v,I as W,u as x,J as N,s as M,K as A,F as S,q as P,L as le,M as ae,N as ne,O as se,k as oe,e as re,l as ie,m as B,C as ue,n as de}from"./index-BBC1P1kV.js";import{_ as O}from"./Modal-Bbokac-i.js";import{_ as J}from"./TextField-DHM_XWB9.js";import{_ as ce}from"./SelectField-B06SVX_c.js";import{f as E,W as me}from"./dateUtils-Blb5nBSr.js";import{B as ye}from"./banknote-Bz1RrMcI.js";import{P as K,X as G,_ as pe}from"./FAB-D_x_lSjX.js";import{S as _}from"./star-saadwzQ7.js";/**
 * @license lucide-vue-next v0.485.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const be=Y("minus",[["path",{d:"M5 12h14",key:"1ays0h"}]]);/**
 * @license lucide-vue-next v0.485.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ve=Y("wallet-minimal",[["path",{d:"M17 14h.01",key:"7oqj8z"}],["path",{d:"M7 7h12a2 2 0 0 1 2 2v10a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h14",key:"u1rqew"}]]),ge={class:"flex items-center gap-2"},fe=["value"],xe={__name:"CheckboxField",props:Q({label:{type:String,default:null},value:{type:String,default:""}},{modelValue:{},modelModifiers:{}}),emits:["update:modelValue"],setup(o){const $=Z(o,"modelValue");return(c,k)=>(r(),d("label",ge,[D(l("input",te({type:"checkbox","onUpdate:modelValue":k[0]||(k[0]=g=>$.value=g),class:"checkbox checkbox-sm checkbox-primary",value:o.value},c.$attrs),null,16,fe),[[ee,$.value]]),f(" "+y(o.label??o.value),1)]))}},ke={class:"mt-4 mb-6"},he={key:0,class:"alert alert-soft alert-warning mt-4"},$e={class:"grid grid-cols-2 text-center"},Ce={key:0,class:"mb-4"},we=["value"],Ie={key:1,role:"alert",class:"alert alert-warning alert-soft"},Me={class:"grid grid-cols-2 text-center mb-4"},Te={key:2,role:"alert",class:"alert alert-warning alert-soft"},Fe={key:3,class:"my-4 text-center"},De={class:"alert alert-soft"},Se={class:"flex justify-center items-center gap-6 mt-6"},Le=["disabled"],Ve={class:"text-center w-3/12"},qe=["disabled"],Ae={class:"my-4 text-sm text-center"},Ee={__name:"Form",props:{transaction:{type:Object,default:null},categories:{type:Array,default:[]},accounts:{type:Array,default:[]}},emits:["close"],setup(o,{emit:$}){const c=o,k=$,g=V(()=>{var a;return(a=c.categories)==null?void 0:a.filter(e=>e.type===t.value.type).slice().sort((e,m)=>e.name.localeCompare(m.name)).map(e=>({label:e.name,value:e.id}))}),p=V(()=>{var e,m;let a=(m=(e=c.accounts)==null?void 0:e.slice())==null?void 0:m.filter(s=>{var b;return((b=c.transaction)==null?void 0:b.ccId)!==s.id&&s.type===t.value.cardType}).sort((s,b)=>s.type===b.type?s.name.localeCompare(b.name):s.type.localeCompare(b.type)).map(s=>({label:`${s.name} / ${s.type} ${L(s.type=="Debit"?s.amount:s.creditLimit-s.balance)}`,value:s.id}));return[{label:"Out Source / Cash",value:""},...a]}),u={id:null,amount:null,type:"Expense",time:E(new Date),categoryId:"",cardType:"Credit",accountId:"",label:"",isCCPay:!1,ccId:null,isInstallment:!1,installmentId:null,installmentMonths:3,installmentPosition:0},t=I({...u});R(()=>c.transaction,a=>{a!=null&&a.id?t.value={...a,time:E(a.time)}:a!=null&&a.isFavorite?(delete a.isFavorite,t.value={...a,time:E(new Date)}):t.value={...u}},{immediate:!0}),R(()=>t.value.type,()=>{t.value.categoryId=""});const n=async a=>{var s;a.preventDefault(),t.value.time=E(t.value.time);const e=JSON.parse(JSON.stringify(t.value));e.id||delete e.id;const m=await le(e);m.success?((s=document.querySelector("#transaction-form-modal"))==null||s.close(),k("close")):console.error(m.error)};return(a,e)=>{const m=H("RouterLink");return r(),q(O,{id:"transaction-form-modal",modalTitle:`${t.value.id?"Edit":"Add"} Transaction`,isForm:"",submit:n,closeLabel:"Cancel",additionalClasses:"max-w-none w-full h-full rounded-none",additionalSlotClasses:"max-h-[100dvh] pb-10dvh",addBottomActionsPadding:""},{default:F(()=>{var s,b;return[l("div",ke,[D(l("input",{id:"transaction-amount","onUpdate:modelValue":e[0]||(e[0]=i=>t.value.amount=i),type:"number",step:"0.01",placeholder:"0.00",required:"",class:"text-center w-full font-bold text-5xl outline-none",min:"0.01"},null,512),[[W,t.value.amount]]),e[14]||(e[14]=l("p",{class:"text-center -mt-3"},[l("label",{for:"transaction-amount",class:"font-bold inline-block text-secondary"},"Amount")],-1))]),t.value.id&&t.value.isInstallment?(r(),d("div",he,[v(x(N),{size:"16"}),e[15]||(e[15]=l("span",null,[f("You are editing an installment transaction. Changing the "),l("strong",null,"Time"),f(" will set this is the starting of installment (1st month).")],-1))])):C("",!0),l("div",$e,[l("label",{class:M(["cursor-pointer font-bold text-md border-2 border-red-500 rounded-xl rounded-r-none border-r-0 py-2",{"bg-linear-to-r from-red-900 to-red-600 text-white":t.value.type==="Expense","bg-transparent text-red-500":t.value.type!=="Expense"}])},[v(x(ye),{size:24,class:"inline opacity-75"}),e[16]||(e[16]=l("span",{class:"block"},"Expense",-1)),D(l("input",{type:"radio","onUpdate:modelValue":e[1]||(e[1]=i=>t.value.type=i),value:"Expense",class:"hidden"},null,512),[[A,t.value.type]])],2),l("label",{class:M(["cursor-pointer font-bold text-md border-2 border-green-500 rounded-xl rounded-l-none border-l-0 py-2",{"bg-linear-to-l from-green-900 to-green-600 text-white":t.value.type==="Income","bg-transparent text-green-500":t.value.type!=="Income"}])},[v(x(ve),{size:24,class:"inline opacity-75"}),e[17]||(e[17]=l("span",{class:"block"},"Income",-1)),D(l("input",{type:"radio","onUpdate:modelValue":e[2]||(e[2]=i=>t.value.type=i),value:"Income",class:"hidden"},null,512),[[A,t.value.type]])],2)]),t.value.isCCPay?C("",!0):(r(),d(S,{key:1},[e[21]||(e[21]=l("p",{class:"mt-8 mb-4 font-bold text-primary"},"Category",-1)),(s=g.value)!=null&&s.length?(r(),d("div",Ce,[(r(!0),d(S,null,P(g.value,i=>(r(),d("label",{key:i.value,class:M(["cursor-pointer text-sm inline-block p-1 border border-gray-300 mr-2 mb-2 rounded transition-colors",{"border-secondary bg-secondary":t.value.categoryId===i.value}])},[l("span",{class:M(t.value.categoryId===i.value?"text-white":"")},y(i.label),3),D(l("input",{type:"radio","onUpdate:modelValue":e[3]||(e[3]=T=>t.value.categoryId=T),value:i.value,class:"w-0 h-0 opacity-0",required:""},null,8,we),[[A,t.value.categoryId]])],2))),128))])):(r(),d("div",Ie,[v(x(N)),l("span",null,[e[19]||(e[19]=f("There's no categories yet. ")),v(m,{to:"/manage/categories",class:"link"},{default:F(()=>e[18]||(e[18]=[f("Tap here to add")])),_:1}),e[20]||(e[20]=f("."))])]))],64)),e[32]||(e[32]=l("p",{class:"mt-8 mb-2 font-bold text-primary"},"Account Type",-1)),l("div",Me,[l("label",{class:M(["cursor-pointer font-bold text-sm border-2 border-gray-500 rounded-xl rounded-r-none border-r-0 py-2",{"bg-linear-to-r from-gray-900 to-gray-600 text-white":t.value.cardType==="Credit","bg-transparent text-gray-500":t.value.cardType!=="Credit"}])},[e[22]||(e[22]=l("span",{class:"block"},"Credit",-1)),D(l("input",{type:"radio","onUpdate:modelValue":e[4]||(e[4]=i=>t.value.cardType=i),value:"Credit",class:"hidden"},null,512),[[A,t.value.cardType]])],2),l("label",{class:M(["cursor-pointer font-bold text-sm border-2 border-gray-500 rounded-xl rounded-l-none border-l-0 py-2",{"bg-linear-to-l from-gray-900 to-gray-600 text-white":t.value.cardType==="Debit","bg-transparent text-gray-500":t.value.cardType!=="Debit"}])},[e[23]||(e[23]=l("span",{class:"block"},"Debit",-1)),D(l("input",{type:"radio","onUpdate:modelValue":e[5]||(e[5]=i=>t.value.cardType=i),value:"Debit",class:"hidden"},null,512),[[A,t.value.cardType]])],2)]),(b=p.value)!=null&&b.length?C("",!0):(r(),d("div",Te,[v(x(N)),l("span",null,[e[25]||(e[25]=f("There's no accounts yet. ")),v(m,{to:"/manage/accounts",class:"link"},{default:F(()=>e[24]||(e[24]=[f("Tap here to add")])),_:1}),e[26]||(e[26]=f("."))])])),v(ce,{label:"Account",modelValue:t.value.accountId,"onUpdate:modelValue":e[6]||(e[6]=i=>t.value.accountId=i),options:p.value,required:""},null,8,["modelValue","options"]),v(J,{label:"Time",modelValue:t.value.time,"onUpdate:modelValue":e[7]||(e[7]=i=>t.value.time=i),type:"datetime-local",required:""},null,8,["modelValue"]),t.value.isCCPay?C("",!0):(r(),d("div",Fe,[v(xe,{class:"inline-flex",label:"This transaction is installment",modelValue:t.value.isInstallment,"onUpdate:modelValue":e[8]||(e[8]=i=>t.value.isInstallment=i),disabled:!!t.value.id},null,8,["modelValue","disabled"])])),t.value.isInstallment?(r(),d(S,{key:4},[l("div",De,[v(x(N),{size:"16"}),e[27]||(e[27]=l("span",null,[f("For installment, please indicate the monthly payment in the "),l("strong",{class:"text-secondary"},"Amount"),f(" field above as this is the one which will be copied for the succeeding months.")],-1))]),l("div",Se,[l("div",null,[l("span",{class:"btn btn-soft btn-primary btn-circle",disabled:t.value.installmentMonths<=2?!0:null,onClick:e[9]||(e[9]=()=>{t.value.installmentMonths>2&&t.value.installmentMonths--})},[v(x(be))],8,Le)]),l("div",Ve,[D(l("input",{type:"number","onUpdate:modelValue":e[10]||(e[10]=i=>t.value.installmentMonths=i),class:"font-bold text-4xl outline-none text-center w-full",required:"",min:"2",max:"999",onKeyup:e[11]||(e[11]=()=>{t.value.installmentMonths<2?t.value.installmentMonths=2:t.value.installmentMonths>999&&(t.value.installmentMonths=999)})},null,544),[[W,t.value.installmentMonths]]),e[28]||(e[28]=l("small",{class:"font-bold block -mt-1"},"Months",-1))]),l("div",null,[l("span",{class:"btn btn-soft btn-primary btn-circle",disabled:t.value.installmentMonths>=999?!0:null,onClick:e[12]||(e[12]=()=>{t.value.installmentMonths<999&&t.value.installmentMonths++})},[v(x(K))],8,qe)])]),l("p",Ae,[e[29]||(e[29]=l("strong",{class:"text-primary"},"Computation: ",-1)),e[30]||(e[30]=f()),e[31]||(e[31]=l("br",null,null,-1)),f(" "+y(x(L)(t.value.amount)+" x "+(t.value.installmentMonths||1)+" months = ")+" ",1),l("strong",null,y(x(L)((t.value.amount||0)*(t.value.installmentMonths||1))),1)])],64)):C("",!0),v(J,{label:"Label",modelValue:t.value.label,"onUpdate:modelValue":e[13]||(e[13]=i=>t.value.label=i),placeholder:"Label / Comment"},null,8,["modelValue"])]}),_:1},8,["modalTitle"])}}},Oe={class:"mt-4 p-2 rounded-lg border-1 border-primary bg-primary/10"},ze={key:0,class:"text-center font-bold text-lg"},Ue={class:"text-center font-bold text-lg text-primary"},Ne={key:0,class:"opacity-50"},Pe={key:1,class:"text-center text-xs"},je={key:0,class:"mt-4 space-y-2"},Be={__name:"DeleteForm",props:{transaction:{type:Object,default:null}},emits:["close"],setup(o,{emit:$}){const c=o,k=$,g=async(p=!1)=>{var t;const u=await ae(c.transaction.id,p);u.success?((t=document.querySelector("#delete-transaction-modal"))==null||t.close(),k("close")):console.error(u.error)};return(p,u)=>{var t,n;return r(),q(O,{id:"delete-transaction-modal",modalTitle:"Delete Transaction",isDanger:"",isForm:!((t=o.transaction)!=null&&t.isInstallment),submit:(n=o.transaction)!=null&&n.isInstallment?null:g,formButtonLabel:"Confirm",closeLabel:"Cancel"},{default:F(()=>{var a,e,m,s,b,i,T,z,U;return[u[2]||(u[2]=l("p",{class:"text-center text-balance"},"Are you sure you want to delete this transaction?",-1)),l("div",Oe,[(a=o.transaction)!=null&&a.label?(r(),d("p",ze,y((e=o.transaction)==null?void 0:e.label),1)):C("",!0),l("p",Ue,[f(y(x(L)((m=o.transaction)==null?void 0:m.amount))+" ",1),(s=o.transaction)!=null&&s.isInstallment?(r(),d("small",Ne,"per month")):C("",!0)]),(b=o.transaction)!=null&&b.isInstallment?(r(),d("p",Pe,y(((i=o.transaction)==null?void 0:i.installmentPosition)+"/"+((T=o.transaction)==null?void 0:T.installmentMonths))+" month"+y(((z=o.transaction)==null?void 0:z.installmentMonths)>1?"s":""),1)):C("",!0)]),(U=o.transaction)!=null&&U.isInstallment?(r(),d("div",je,[l("button",{class:"text-error font-bold text-center w-full block",onClick:u[0]||(u[0]=j=>g(!0))}," Delete All Installments "),l("button",{class:"text-error font-bold text-center w-full block",onClick:u[1]||(u[1]=j=>g(!1))}," Delete This (and Future) Only ")])):C("",!0)]}),_:1},8,["isForm","submit"])}}},_e={key:0,class:"flex justify-center items-center h-32 py-64"},Re={key:1,class:"text-center pt-48"},We={class:"p-4 pb-2 tracking-wide"},Je={class:"badge badge-secondary badge-sm text-white"},Ye=["onClick"],He={key:0,class:"text-warning inline-block ml-1"},Ke={class:"text-xs font-semibold opacity-80"},Ge={class:"my-1"},Xe={key:0,class:"inline-block ml-1 opacity-70"},Qe=["onClick"],Ze=["onClick"],et={__name:"List",props:["transactions","isLoading","categories","accounts"],emits:["edit","delete","fetchData","favorite"],setup(o){const $=o,c=p=>{var u;return p?(u=$.accounts)==null?void 0:u.find(t=>t.id===p):null},k=p=>{var u;return p?(u=$.categories)==null?void 0:u.find(t=>t.id===p):null},g=V(()=>{const p={};return $.transactions.forEach(u=>{const t=E(u.time).split("T")[0];p[t]||(p[t]=[]),u.account=c(u.accountId),u.category=k(u.categoryId),p[t].push(u)}),p});return(p,u)=>(r(),d("div",null,[o.isLoading?(r(),d("div",_e,u[0]||(u[0]=[l("span",{class:"loading loading-spinner loading-xl loading-primary"},null,-1)]))):Object.keys(g.value).length===0?(r(),d("div",Re,[v(x(me),{size:"124",class:"inline-block text-gray-300"}),u[1]||(u[1]=l("p",{class:"text-gray-300 text-lg mt-2"},"No transactions this month",-1))])):(r(!0),d(S,{key:2},P(g.value,(t,n)=>(r(),d("ul",{class:"list bg-base-100 rounded-box shadow-md mb-6 dark:bg-gray-800",key:n},[l("li",We,[l("span",Je,y(new Date(n).toLocaleDateString("en-US",{month:"short",day:"numeric",year:"numeric"})),1)]),(r(!0),d(S,null,P(t,a=>{var e,m,s,b;return r(),d("li",{class:M(["list-row flex justify-between items-center gap-0",{"bg-green-50 dark:bg-green-800/30":a.isCCPay}]),key:a.id},[l("div",{onClick:i=>p.$emit("edit",a),class:"w-full"},[l("div",null,[l("span",{class:M(["font-bold",{"text-red-500":((e=a.category)==null?void 0:e.type)=="Expense","text-green-500":((m=a.category)==null?void 0:m.type)=="Income"}])},y(x(L)(a.amount)),3),a.isInstallment?(r(),d("span",He,"("+y(a.installmentPosition+"/"+a.installmentMonths)+" month"+y(a.installmentMonths>1?"s":"")+")",1)):C("",!0)]),l("div",Ke,[l("p",Ge,y(a.label),1),l("span",{class:M({"text-secondary":((s=a.account)==null?void 0:s.type)=="Debit","text-warning":((b=a.account)==null?void 0:b.type)=="Credit","text-error":!a.account})},y(a.account?a.account.name:"Out Source"),3),a.category?(r(),d("span",Xe,y(a.category.name),1)):C("",!0)])],8,Ye),!a.isInstallment&&!a.isCCPay?(r(),d("button",{key:0,class:"btn btn-square btn-sm btn-ghost text-warning",onClick:i=>p.$emit("favorite",a)},[v(x(_),{size:"16"})],8,Qe)):C("",!0),l("button",{class:"btn btn-square btn-sm btn-ghost text-error",onClick:i=>p.$emit("delete",a)},[v(x(G),{size:"16"})],8,Ze)],2)}),128))]))),128))]))}},tt={class:"py-4"},lt={class:"table"},at={key:1,class:"text-gray-500"},nt={__name:"Favorite",props:{transaction:{type:Object,default:null},accounts:{type:Array,default:[]},categories:{type:Array,default:[]}},emits:["close"],setup(o,{emit:$}){const c=o,k=$,g=V(()=>{var t,n;return(t=c.transaction)!=null&&t.accountId?(n=c.accounts)==null?void 0:n.find(a=>a.id===c.transaction.accountId):null}),p=V(()=>{var t,n;return(t=c.transaction)!=null&&t.categoryId?(n=c.categories)==null?void 0:n.find(a=>a.id===c.transaction.categoryId):null}),u=async()=>{var a,e,m,s,b,i,T;const t={label:(a=c.transaction)==null?void 0:a.label,amount:(e=c.transaction)==null?void 0:e.amount,type:(m=c.transaction)==null?void 0:m.type,categoryId:(s=c.transaction)==null?void 0:s.categoryId,cardType:(b=c.transaction)==null?void 0:b.cardType,accountId:(i=c.transaction)==null?void 0:i.accountId},n=await ne("favorites",t);n.success?((T=document.querySelector("#transaction-favorite-modal"))==null||T.close(),k("close")):console.error("Failed to save favorite:",n.error)};return(t,n)=>(r(),q(O,{id:"transaction-favorite-modal",isForm:"",submit:u,closeLabel:"Cancel",modalTitle:"Save Template"},{default:F(()=>{var a,e,m,s,b;return[l("div",tt,[l("table",lt,[l("tbody",null,[l("tr",null,[n[0]||(n[0]=l("th",{class:"text-left text-primary p-0"},"Label",-1)),n[1]||(n[1]=l("td",{class:"p-0"},":",-1)),l("td",null,[(a=o.transaction)!=null&&a.label?(r(),d(S,{key:0},[f(y((e=o.transaction)==null?void 0:e.label),1)],64)):(r(),d("span",at,"No Label"))])]),l("tr",null,[n[2]||(n[2]=l("th",{class:"text-left text-primary p-0"},"Amount",-1)),n[3]||(n[3]=l("td",{class:"p-0"},":",-1)),l("td",null,y(x(L)((m=o.transaction)==null?void 0:m.amount)),1)]),l("tr",null,[n[4]||(n[4]=l("th",{class:"text-left text-primary p-0"},"Transaction Type",-1)),n[5]||(n[5]=l("td",{class:"p-0"},":",-1)),l("td",null,y((s=o.transaction)==null?void 0:s.type),1)]),l("tr",null,[n[6]||(n[6]=l("th",{class:"text-left text-primary p-0"},"Category",-1)),n[7]||(n[7]=l("td",{class:"p-0"},":",-1)),l("td",null,y(p.value?`${p.value.name} (${p.value.type})`:"--"),1)]),l("tr",null,[n[8]||(n[8]=l("th",{class:"text-left text-primary p-0"},"Account Type",-1)),n[9]||(n[9]=l("td",{class:"p-0"},":",-1)),l("td",null,y((b=o.transaction)==null?void 0:b.cardType),1)]),l("tr",null,[n[10]||(n[10]=l("th",{class:"text-left text-primary p-0"},"Account",-1)),n[11]||(n[11]=l("td",{class:"p-0"},":",-1)),l("td",null,y(g.value?`${g.value.name} (${g.value.type})`:"Out Source"),1)])])])])]}),_:1}))}},st={class:"list bg-base-100 rounded-box border-1 border-gray-200 mb-6 mt-1"},ot={class:"flex gap-4 w-full"},rt=["onClick"],it={key:1,class:"text-gray-400"},ut={class:"flex gap-2 items-center mt-1"},dt={class:"text-xs font-semibold"},ct={key:1,class:"opacity-50"},mt=["onClick"],yt={key:0,class:"p-2"},pt={class:"alert alert-warning alert-soft"},bt={__name:"SelectFavorite",props:{favorites:{type:Array,default:[]},accounts:{type:Array,default:[]},categories:{type:Array,default:[]}},emits:["useFavorite","deleteFavorite"],setup(o,{emit:$}){const c=o,k=$,g=n=>{var a;return n?(a=c.accounts)==null?void 0:a.find(e=>e.id===n):null},p=n=>{var a;return n?(a=c.categories)==null?void 0:a.find(e=>e.id===n):null},u=V(()=>{const n=[];return c.favorites.forEach(a=>{a.account=g(a.accountId),a.category=p(a.categoryId),n.push(a)}),n.sort((a,e)=>{var m,s,b,i;return((m=a.category)==null?void 0:m.type)===((s=e.category)==null?void 0:s.type)?a.label.localeCompare(e.label):(((b=a.category)==null?void 0:b.type)||"").localeCompare(((i=e.category)==null?void 0:i.type)||"")})}),t=n=>{var a;k("useFavorite",n),(a=document.querySelector("#select-favorite-modal"))==null||a.close()};return(n,a)=>{const e=H("RouterLink");return r(),q(O,{id:"select-favorite-modal",modalTitle:"Select Template",closeLabel:"Cancel"},{default:F(()=>{var m;return[l("p",null,[a[1]||(a[1]=f(" To manage this listing, ")),v(e,{to:"/manage/favorites",class:"link text-orange-500"},{default:F(()=>a[0]||(a[0]=[f("tap here")])),_:1}),a[2]||(a[2]=f(". "))]),l("ul",st,[(r(!0),d(S,null,P(u.value,s=>(r(),d("li",{class:"list-row flex justify-between hover:bg-base-300 select-none",key:s.id},[l("div",ot,[l("div",{class:"flex-1",onClick:b=>t(s)},[l("div",null,[s.label?(r(),d(S,{key:0},[f(y(s.label),1)],64)):(r(),d("span",it,"No Label")),s.category?(r(),d("span",{key:2,class:M(["text-white ml-1",{"badge badge-sm badge-primary":s.type==="Income","badge badge-sm badge-error":s.type==="Expense"}])},y(`${s.category.name} (${s.type})`),3)):C("",!0)]),l("div",ut,[l("div",dt,[f(y(s.amount)+" ",1),s.account?(r(),d("span",{key:0,class:M({"text-warning":s.cardType==="Credit","text-secondary":s.cardType==="Debit"})},y(`${s.account.name} (${s.cardType})`),3)):(r(),d("span",ct,"Out Source"))])])],8,rt),l("button",{class:"btn btn-square btn-sm btn-ghost text-error ml-auto",onClick:b=>n.$emit("deleteFavorite",s)},[v(x(G),{size:"16"})],8,mt)])]))),128))]),(m=u.value)!=null&&m.length?C("",!0):(r(),d("div",yt,[l("div",pt,[l("span",null,[a[3]||(a[3]=f("No favorites available. Tap the ")),v(x(_),{class:"inline-block -mt-1",size:"16"}),a[4]||(a[4]=f(" button next to a transaction to add one. "))])])]))]}),_:1})}}},vt={class:"mt-4 p-2 rounded-lg border-1 border-primary bg-primary/10"},gt={key:0,class:"text-center font-bold text-lg"},ft={key:1,class:"text-center text-xs text-gray-500"},xt={key:2,class:"text-center text-xs text-gray-500"},kt={class:"text-center font-bold text-lg text-primary"},ht={__name:"DeleteFavoriteForm",props:{favorite:{type:Object,default:null}},emits:["deleted"],setup(o,{emit:$}){const c=o,k=$,g=I(!1),p=async()=>{var t,n;g.value=!0;const u=await se("favorites",c.favorite.id);g.value=!1,u.success?((t=document.querySelector("#delete-favorite-modal"))==null||t.close(),k("deleted")):(n=document.querySelector("#delete-favorite-modal"))==null||n.close()};return(u,t)=>(r(),q(O,{id:"delete-favorite-modal",modalTitle:"Delete Template",isDanger:"",isForm:!0,submit:p,formButtonLabel:"Confirm",closeLabel:"Cancel"},{default:F(()=>{var n,a,e,m,s,b,i;return[t[0]||(t[0]=l("p",{class:"text-center text-balance"},"Are you sure you want to delete this saved template?",-1)),l("div",vt,[(n=o.favorite)!=null&&n.label?(r(),d("p",gt,y((a=o.favorite)==null?void 0:a.label),1)):C("",!0),(m=(e=o.favorite)==null?void 0:e.category)!=null&&m.name?(r(),d("p",ft,y(o.favorite.category.name)+" ("+y(o.favorite.type)+") ",1)):C("",!0),(b=(s=o.favorite)==null?void 0:s.account)!=null&&b.name?(r(),d("p",xt,y(o.favorite.account.name)+" ("+y(o.favorite.cardType)+") ",1)):C("",!0),l("p",kt,y((i=o.favorite)==null?void 0:i.amount),1)])]}),_:1}))}},$t={class:"flex justify-between gap-4 items-center mb-4"},Ct={class:"text-lg font-bold"},Vt={__name:"TransactionsView",setup(o){const $=I([]),c=I([]),k=I([]),g=I(null),p=I([]),u=I(null),t=I(new Date().getMonth()),n=I(new Date().getFullYear()),a=I(!1),e=async(h=!1)=>{a.value=!0,$.value=await ie(n.value,t.value),h&&(c.value=await B("categories"),k.value=await B("accounts")),a.value=!1},m=async()=>{p.value=await B("favorites")},s=(h=null)=>{var w;g.value=h,(w=document.querySelector("#transaction-form-modal"))==null||w.showModal()},b=h=>{var w;g.value=h,(w=document.querySelector("#delete-transaction-modal"))==null||w.showModal()},i=h=>{var w;g.value=h,(w=document.querySelector("#transaction-favorite-modal"))==null||w.showModal()},T=()=>{var h;(h=document.querySelector("#select-favorite-modal"))==null||h.showModal()},z=h=>{var w;u.value=h,(w=document.querySelector("#delete-favorite-modal"))==null||w.showModal()},U=h=>{var w;g.value={label:h.label,amount:h.amount,type:h.type,categoryId:h.categoryId,cardType:h.cardType,accountId:h.accountId,installmentMonths:3,time:new Date().toISOString(),isFavorite:!0},(w=document.querySelector("#transaction-form-modal"))==null||w.showModal()},j=()=>{t.value===0?(t.value=11,n.value-=1):t.value-=1,e()},X=()=>{t.value===11?(t.value=0,n.value+=1):t.value+=1,e()};return oe(()=>{e(!0),m()}),(h,w)=>(r(),q(re,{pageTitle:"Transactions",bg:"bg-gray-100 dark:bg-gray-900"},{default:F(()=>[l("div",$t,[l("button",{class:"btn btn-xs btn-circle btn-soft btn-primary",onClick:j},[v(x(ue))]),l("h2",Ct,y(new Date(n.value,t.value).toLocaleString("default",{month:"long",year:"numeric"})),1),l("button",{class:"btn btn-xs btn-circle btn-soft btn-primary",onClick:X},[v(x(de))])]),v(et,{transactions:$.value,isLoading:a.value,categories:c.value,accounts:k.value,onEdit:s,onDelete:b,onFavorite:i},null,8,["transactions","isLoading","categories","accounts"]),v(pe,{icon:x(K),onClick:s},null,8,["icon"]),l("button",{class:"btn btn-circle btn-secondary fixed bottom-34 shadow-secondary/50 shadow-md right-24 btn-sm",onClick:T},[v(x(_),{size:20,strokeWidth:"2"})]),v(Ee,{transaction:g.value,onClose:e,categories:c.value,accounts:k.value},null,8,["transaction","categories","accounts"]),v(Be,{transaction:g.value,onClose:e},null,8,["transaction"]),v(nt,{transaction:g.value,categories:c.value,accounts:k.value,onClose:m},null,8,["transaction","categories","accounts"]),v(bt,{favorites:p.value,accounts:k.value,categories:c.value,onUseFavorite:U,onDeleteFavorite:z},null,8,["favorites","accounts","categories"]),v(ht,{favorite:u.value,onDeleted:m},null,8,["favorite"])]),_:1}))}};export{Vt as default};
