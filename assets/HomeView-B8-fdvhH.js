import{_ as F}from"./SubPageLayout-BkPwD_S0.js";import{c as z,r as x,a as T,o as y,w as f,b as e,e as a,u,k,m as $,F as S,d as o,t as E,K as w,L as R,M as N,g as _,i as h,E as P,W as U,I as V}from"./index-pL2pC3gh.js";import{_ as I}from"./Modal-9d6hi-e2.js";import{T as C}from"./trash-2-Cr7NIdpW.js";import{S as H}from"./star-BmCZPukv.js";/**
 * @license lucide-vue-next v0.484.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const O=z("banknote",[["rect",{width:"20",height:"12",x:"2",y:"6",rx:"2",key:"9lu3g6"}],["circle",{cx:"12",cy:"12",r:"2",key:"1c9p78"}],["path",{d:"M6 12h.01M18 12h.01",key:"113zkx"}]]);/**
 * @license lucide-vue-next v0.484.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const B=z("download",[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"7 10 12 15 17 10",key:"2ggqvy"}],["line",{x1:"12",x2:"12",y1:"15",y2:"3",key:"1vk2je"}]]);/**
 * @license lucide-vue-next v0.484.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const L=z("triangle-alert",[["path",{d:"m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3",key:"wmoenq"}],["path",{d:"M12 9v4",key:"juzpu7"}],["path",{d:"M12 17h.01",key:"p32p05"}]]);/**
 * @license lucide-vue-next v0.484.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const q=z("upload",[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"17 8 12 3 7 8",key:"t8dd8p"}],["line",{x1:"12",x2:"12",y1:"3",y2:"15",key:"widbto"}]]),W={class:"mt-2 mb-4 text-center"},j={class:"my-2 text-center text-balance"},G={class:"text-error"},J={__name:"ResetCategory",props:{type:{type:String,default:""}},emits:["close"],setup(d,{emit:p}){const n=d,g=p,m=x(!1),l=[{name:"Salary",budget:0,type:"Income"},{name:"Bonus",budget:0,type:"Income"},{name:"Freelance",budget:0,type:"Income"},{name:"Business",budget:0,type:"Income"},{name:"Investment",budget:0,type:"Income"}],r=[{name:"Groceries",budget:0,type:"Expense"},{name:"Electricity",budget:0,type:"Expense"},{name:"Water",budget:0,type:"Expense"},{name:"Internet",budget:0,type:"Expense"},{name:"Phone Plan",budget:0,type:"Expense"},{name:"Rent",budget:0,type:"Expense"},{name:"Dining Out",budget:0,type:"Expense"},{name:"Breakfast",budget:0,type:"Expense"},{name:"Lunch",budget:0,type:"Expense"},{name:"Dinner",budget:0,type:"Expense"},{name:"Snacks",budget:0,type:"Expense"},{name:"Entertainment",budget:0,type:"Expense"},{name:"Digital Subscriptions",budget:0,type:"Expense"},{name:"Gaming Top-ups",budget:0,type:"Expense"},{name:"Personal Care",budget:0,type:"Expense"},{name:"Household Supplies",budget:0,type:"Expense"},{name:"Insurance",budget:0,type:"Expense"},{name:"Apparels",budget:0,type:"Expense"},{name:"Gadgets",budget:0,type:"Expense"},{name:"Appliances",budget:0,type:"Expense"},{name:"Withdrawal",budget:0,type:"Expense"}],s=async b=>{var i;b.preventDefault(),m.value=!0;try{if(n.type==="Income"||n.type==="Expense"){await w.categories.where("type").equals(n.type).delete();const D=n.type==="Income"?l:r;await w.categories.bulkAdd(D)}else n.type==="All"?(await w.categories.clear(),await w.categories.bulkAdd(l),await w.categories.bulkAdd(r)):n.type==="Clear"&&await w.categories.clear();(i=document.querySelector("#reset-category-modal"))==null||i.close(),g("close")}catch(D){console.error(`Failed to reset categories (${n.type}):`,D)}finally{m.value=!1}};return(b,i)=>(y(),T(I,{id:"reset-category-modal",modalTitle:`Reset ${d.type} Categories`,formButtonLabel:"Confirm",isForm:"",isDanger:"",submit:s,closeLabel:"Cancel"},{default:f(()=>[e("p",W,[a(u(C),{size:"54",class:"inline-block text-error"})]),e("p",j,[d.type==="Income"||d.type==="Expense"?(y(),k(S,{key:0},[i[0]||(i[0]=o(" Are you sure you want to reset all ")),e("strong",G,E(d.type),1),i[1]||(i[1]=o(" categories? This action will delete all existing categories of this type and replace them with default values. "))],64)):d.type==="All"?(y(),k(S,{key:1},[i[2]||(i[2]=o(" Are you sure you want to reset ")),i[3]||(i[3]=e("strong",{class:"text-error"},"all categories",-1)),i[4]||(i[4]=o("? This action will delete all categories and replace them with default values for income and expense. "))],64)):d.type==="Clear"?(y(),k(S,{key:2},[i[5]||(i[5]=o(" Are you sure you want to ")),i[6]||(i[6]=e("strong",{class:"text-error"},"clear all categories",-1)),i[7]||(i[7]=o("? This action will delete all categories without adding any default values. "))],64)):$("",!0)])]),_:1},8,["modalTitle"]))}},K={class:"mt-2 mb-4 text-center"},Y={__name:"ClearTransactions",emits:["close"],setup(d,{emit:p}){const n=p,g=x(!1),m=async l=>{var r;l.preventDefault(),g.value=!0;try{await w.transactions.clear(),(r=document.querySelector("#clear-transactions-modal"))==null||r.close(),n("close")}catch(s){console.error("Failed to clear transactions:",s)}finally{g.value=!1}};return(l,r)=>(y(),T(I,{id:"clear-transactions-modal",modalTitle:"Clear All Transactions",formButtonLabel:"Confirm",isForm:"",isDanger:"",submit:m,closeLabel:"Cancel"},{default:f(()=>[e("p",K,[a(u(C),{size:"54",class:"inline-block text-error"})]),r[0]||(r[0]=e("p",{class:"my-2 text-center text-balance"},[o(" Are you sure you want to delete "),e("strong",{class:"text-error"},"all transactions"),o("? This action cannot be undone. Also, this will not update your accounts' current balances. ")],-1))]),_:1}))}},Q={class:"mt-2 mb-4 text-center"},X={key:0,class:"text-error text-center"},Z={key:1,class:"text-center my-4"},ee={__name:"Export",setup(d){const p=x(!1),n=x(null),g=async m=>{var l;m.preventDefault(),p.value=!0,n.value=null;try{const r=await R();if(!r.success)throw new Error(r.error||"Unknown error occurred during export.");(l=document.querySelector("#export-data-modal"))==null||l.close()}catch(r){console.error("Failed to export data:",r),n.value="An error occurred while exporting data."}finally{p.value=!1}};return(m,l)=>(y(),T(I,{id:"export-data-modal",modalTitle:"Export and Back up Data",formButtonLabel:"Export",isForm:"",submit:g},{default:f(()=>[e("p",Q,[a(u(q),{size:"54",class:"inline-block text-accent"})]),l[1]||(l[1]=e("p",{class:"text-center my-2"},[o(" This will export all your data from "),e("span",{class:"text-primary font-bold"},"Budgy"),o(" into a JSON file. You can use this file to back up your data and import later should you need to transfer it to a new device. ")],-1)),n.value?(y(),k("p",X,E(n.value),1)):$("",!0),p.value?(y(),k("div",Z,l[0]||(l[0]=[e("span",{class:"loading loading-spinner"},null,-1),o(" Exporting data... ")]))):$("",!0)]),_:1}))}},te={class:"mt-2 mb-4 text-center"},oe={key:0,class:"text-error text-center"},ne={key:1,class:"text-center my-4"},le={__name:"Import",setup(d){const p=x(!1),n=x(null),g=async m=>{var s;m.preventDefault();const l=document.querySelector("#import-file-input"),r=l==null?void 0:l.files[0];if(!r){n.value="Please select a valid JSON file.";return}p.value=!0,n.value=null;try{const b=await r.text(),i=await N(b);if(!i.success)throw new Error(i.error||"Unknown error occurred during import.");(s=document.querySelector("#import-data-modal"))==null||s.close()}catch(b){console.error("Failed to import data:",b),n.value="An error occurred while importing data. Please check the file format."}finally{p.value=!1}};return(m,l)=>(y(),T(I,{id:"import-data-modal",modalTitle:"Import and Restore Data",formButtonLabel:"Import",isForm:"",isDanger:"",submit:g},{default:f(()=>[e("p",te,[a(u(B),{size:"54",class:"inline-block text-accent"})]),l[1]||(l[1]=e("p",{class:"text-center my-2"},[o(" Upload a JSON file exported from "),e("span",{class:"text-primary font-bold"},"Budgy"),o(" to restore your data. This will "),e("span",{class:"text-error"},"replace all existing data"),o(" in the app. ")],-1)),l[2]||(l[2]=e("input",{id:"import-file-input",type:"file",accept:"application/json",class:"file-input file-input-primary w-full my-4",required:""},null,-1)),n.value?(y(),k("p",oe,E(n.value),1)):$("",!0),p.value?(y(),k("div",ne,l[0]||(l[0]=[e("span",{class:"loading loading-spinner"},null,-1),o(" Importing data... ")]))):$("",!0)]),_:1}))}},ae={class:"mt-2 mb-4 text-center"},se={class:"my-2 text-center text-balance"},re={class:"text-error"},ie={__name:"ClearAccounts",props:{type:{type:String,default:""}},emits:["close"],setup(d,{emit:p}){const n=d,g=p,m=x(!1),l=async r=>{var s;r.preventDefault(),m.value=!0;try{n.type==="Debit"||n.type==="Credit"?await w.accounts.where("type").equals(n.type).delete():n.type==="All"&&await w.accounts.clear(),(s=document.querySelector("#clear-accounts-modal"))==null||s.close(),g("close")}catch(b){console.error(`Failed to clear accounts (${n.type}):`,b)}finally{m.value=!1}};return(r,s)=>(y(),T(I,{id:"clear-accounts-modal",modalTitle:`Clear ${d.type} Accounts`,formButtonLabel:"Confirm",isForm:"",isDanger:"",submit:l,closeLabel:"Cancel"},{default:f(()=>[e("p",ae,[a(u(C),{size:"54",class:"inline-block text-error"})]),e("p",se,[d.type==="Debit"||d.type==="Credit"?(y(),k(S,{key:0},[s[0]||(s[0]=o(" Are you sure you want to clear all ")),e("strong",re,E(d.type),1),s[1]||(s[1]=o(" accounts? This action will delete all existing accounts of this type. "))],64)):d.type==="All"?(y(),k(S,{key:1},[s[2]||(s[2]=o(" Are you sure you want to clear ")),s[3]||(s[3]=e("strong",{class:"text-error"},"all accounts",-1)),s[4]||(s[4]=o("? This action will delete all accounts. "))],64)):$("",!0)])]),_:1},8,["modalTitle"]))}},ue={class:"menu rounded-xl w-full [&_li>*]:rounded-lg mb-4 bg-white dark:bg-gray-900"},de={class:"badge badge-sm badge-secondary"},ce={class:"badge badge-sm badge-secondary"},pe={class:"badge badge-sm badge-secondary"},me={class:"menu rounded-xl w-full [&_li>*]:rounded-lg mb-4 bg-white dark:bg-gray-900"},ye={class:"menu rounded-xl w-full [&_li>*]:rounded-lg mb-4 bg-white dark:bg-gray-900"},ge={class:"menu rounded-xl w-full [&_li>*]:rounded-lg mb-4 bg-white dark:bg-gray-900"},xe={class:"menu rounded-xl w-full [&_li>*]:rounded-lg mb-4 bg-white dark:bg-gray-900"},be={class:"menu rounded-xl w-full [&_li>*]:rounded-lg mb-4 bg-white dark:bg-gray-900"},Ee={__name:"HomeView",setup(d){const p=x(0),n=x(0),g=x(0),m=x(null),l=x(null),r=async()=>{const c=await h("categories"),t=await h("accounts"),v=await h("favorites");p.value=(c==null?void 0:c.length)||0,n.value=(t==null?void 0:t.length)||0,g.value=(v==null?void 0:v.length)||0},s=c=>{var t;m.value=c,(t=document.querySelector("#reset-category-modal"))==null||t.showModal()},b=()=>{var c;(c=document.querySelector("#export-data-modal"))==null||c.showModal()},i=()=>{var c;(c=document.querySelector("#import-data-modal"))==null||c.showModal()},D=()=>{var c;(c=document.querySelector("#clear-transactions-modal"))==null||c.showModal()},M=c=>{var t;l.value=c,(t=document.querySelector("#clear-accounts-modal"))==null||t.showModal()};return _(()=>{r()}),(c,t)=>{const v=P("RouterLink");return y(),T(F,null,{default:f(()=>[t[21]||(t[21]=e("h2",{class:"font-semibold mb-1 text-secondary"},"App Data",-1)),e("ul",ue,[e("li",null,[a(v,{to:"/manage/categories"},{default:f(()=>[a(u(O),{size:16}),t[7]||(t[7]=o(" Categories ")),e("span",de,E(p.value),1)]),_:1})]),e("li",null,[a(v,{to:"/manage/accounts"},{default:f(()=>[a(u(U),{size:16}),t[8]||(t[8]=o(" Accounts ")),e("span",ce,E(n.value),1)]),_:1})]),e("li",null,[a(v,{to:"/manage/favorites"},{default:f(()=>[a(u(H),{size:16}),t[9]||(t[9]=o(" Favorites ")),e("span",pe,E(g.value),1)]),_:1})])]),t[22]||(t[22]=e("h2",{class:"font-semibold mb-1 text-secondary"},"Maintenance",-1)),e("ul",me,[e("li",null,[e("button",{onClick:b},[a(u(q),{size:16}),t[10]||(t[10]=o(" Export and Back up Data "))])]),e("li",null,[e("button",{onClick:i},[a(u(B),{size:16}),t[11]||(t[11]=o(" Import and Restore Data "))])])]),e("ul",ye,[e("li",null,[e("button",{class:"text-error",onClick:t[0]||(t[0]=A=>s("Income"))},[a(u(L),{size:16}),t[12]||(t[12]=o(" Reset Income Categories "))])]),e("li",null,[e("button",{class:"text-error",onClick:t[1]||(t[1]=A=>s("Expense"))},[a(u(L),{size:16}),t[13]||(t[13]=o(" Reset Expense Categories "))])]),e("li",null,[e("button",{class:"text-error",onClick:t[2]||(t[2]=A=>s("All"))},[a(u(L),{size:16}),t[14]||(t[14]=o(" Reset All Categories "))])]),e("li",null,[e("button",{class:"text-error",onClick:t[3]||(t[3]=A=>s("Clear"))},[a(u(C),{size:16}),t[15]||(t[15]=o(" Clear All Categories "))])])]),e("ul",ge,[e("li",null,[e("button",{class:"text-error",onClick:t[4]||(t[4]=A=>M("Debit"))},[a(u(C),{size:16}),t[16]||(t[16]=o(" Clear Debit Accounts "))])]),e("li",null,[e("button",{class:"text-error",onClick:t[5]||(t[5]=A=>M("Credit"))},[a(u(C),{size:16}),t[17]||(t[17]=o(" Clear Credit Accounts "))])]),e("li",null,[e("button",{class:"text-error",onClick:t[6]||(t[6]=A=>M("All"))},[a(u(C),{size:16}),t[18]||(t[18]=o(" Clear All Accounts "))])])]),e("ul",xe,[e("li",null,[e("button",{class:"text-error",onClick:D},[a(u(C),{size:16}),t[19]||(t[19]=o(" Clear All Transactions "))])])]),e("ul",be,[e("li",null,[a(v,{to:"/about"},{default:f(()=>[a(u(V),{size:16}),t[20]||(t[20]=o(" About "))]),_:1})])]),a(J,{type:m.value,onClose:r},null,8,["type"]),a(ee),a(le),a(Y,{onClose:r}),a(ie,{type:l.value,onClose:r},null,8,["type"])]),_:1})}}};export{Ee as default};
