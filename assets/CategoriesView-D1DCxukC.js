import{_ as N}from"./SubPageLayout-DAeiBc9m.js";import{_ as h}from"./Modal-aMFiKyMt.js";import{_ as $}from"./TextField-KEBp3v23.js";import{_ as E}from"./RadioField-BQnE541J.js";import{r as b,y as w,c as v,o as d,w as C,h as i,a as r,l as x,B as S,u as _,t as f,N as F,j as g,F as D,k as M,m as T,I as B,d as V,e as O,f as L}from"./index-75_8ZbSF.js";import{T as j}from"./trash-2-CE4zBo-v.js";import{X as q,_ as A,P as I}from"./FAB-2wekwZdd.js";const z={class:"my-4 flex gap-2 justify-around"},U="categories",R={__name:"Form",props:{category:{type:Object,default:null}},emits:["close"],setup(n,{emit:c}){const u=n,m=c,a={id:null,name:"",budget:0,type:"Expense"},t=b({...a});w(()=>u.category,l=>{l!=null&&l.id?t.value={...l}:t.value={...a}},{immediate:!0});const p=async l=>{var o;l.preventDefault();const s=JSON.parse(JSON.stringify(t.value));s.id||delete s.id;const e=await S(U,s);e.success?((o=document.querySelector("#manage-categories-form"))==null||o.close(),m("close")):console.error(e.error)};return(l,s)=>(d(),v(h,{id:"manage-categories-form",modalTitle:`${t.value.id?"Edit":"Add a"} Category`,isForm:"",submit:p,closeLabel:"Cancel"},{default:C(()=>[i($,{label:"Name",modelValue:t.value.name,"onUpdate:modelValue":s[0]||(s[0]=e=>t.value.name=e),modelModifiers:{trim:!0},noMaxW:"",required:"",placeholder:"Groceries, Salary...",maxLength:"50"},null,8,["modelValue"]),r("div",z,[i(E,{modelValue:t.value.type,"onUpdate:modelValue":s[1]||(s[1]=e=>t.value.type=e),value:"Expense",name:"category-type"},null,8,["modelValue"]),i(E,{modelValue:t.value.type,"onUpdate:modelValue":s[2]||(s[2]=e=>t.value.type=e),value:"Income",name:"category-type"},null,8,["modelValue"])]),t.value.type=="Expense"?(d(),v($,{key:0,label:"Budget (Optional)",modelValue:t.value.budget,"onUpdate:modelValue":s[3]||(s[3]=e=>t.value.budget=e),type:"number",steps:"0.01",min:"0",placeholder:"0.00"},null,8,["modelValue"])):x("",!0)]),_:1},8,["modalTitle"]))}},J={class:"mt-2 mb-4 text-center"},P={class:"text-center text-balance mb-2"},G={class:"font-bold text-center text-balance"},W="categories",X={__name:"DeleteForm",props:{category:{type:Object,default:null}},emits:["close"],setup(n,{emit:c}){const u=n,m=c,a=async t=>{var p;t.preventDefault(),u.category&&(await F(W,u.category.id),(p=document.querySelector("#delete-category-form"))==null||p.close(),m("close"))};return(t,p)=>(d(),v(h,{id:"delete-category-form",modalTitle:"Delete Category",formButtonLabel:"Confirm",isForm:"",isDanger:"",submit:a,closeLabel:"Cancel"},{default:C(()=>{var l,s;return[r("p",J,[i(_(j),{size:"54",class:"inline-block text-error"})]),r("p",P," Are you sure you want to delete this "+f((l=n.category)==null?void 0:l.type)+" category? ",1),r("p",G,f((s=n.category)==null?void 0:s.name),1)]}),_:1}))}},H={class:"list bg-base-100 rounded-box shadow-md mb-6"},K={class:"p-4 pb-2 text-xs opacity-60 tracking-wide"},Q=["onClick"],Y={key:0,class:"text-xs uppercase font-semibold text-warning"},Z=["onClick"],ee={key:0},te={class:"p-2"},oe={class:"alert alert-warning alert-soft"},k={__name:"List",props:["categories","type"],emits:["form","delete"],setup(n){return(c,u)=>{var m;return d(),g("ul",H,[r("li",K,f(n.type),1),(d(!0),g(D,null,M(n.categories,a=>(d(),g("li",{class:"list-row flex justify-between",key:a.id},[r("div",{onClick:t=>c.$emit("form",a),class:"flex flex-col justify-center w-full"},[r("div",null,f(a.name),1),a.type=="Expense"?(d(),g("div",Y,f(_(T)(a.budget)||"No Budget Set"),1)):x("",!0)],8,Q),r("button",{class:"btn btn-square btn-sm btn-ghost text-error",onClick:t=>c.$emit("delete",a)},[i(_(q),{size:"16"})],8,Z)]))),128)),(m=n.categories)!=null&&m.length?x("",!0):(d(),g("li",ee,[r("div",te,[r("div",oe,[i(_(B),{size:"16"}),r("span",null,"No "+f(n.type.toLowerCase())+" categories yet",1)])])]))])}}},se="categories",me={__name:"CategoriesView",setup(n){const c=b([]),u=b(null),m=async()=>{c.value=await L(se)},a=(e=null)=>{var o;u.value=e,(o=document.querySelector("#manage-categories-form"))==null||o.showModal()},t=e=>{var o;u.value=e,(o=document.querySelector("#delete-category-form"))==null||o.showModal()},p=()=>{m()},l=V(()=>c.value.filter(e=>e.type==="Income").sort((e,o)=>e.name.localeCompare(o.name))),s=V(()=>c.value.filter(e=>e.type==="Expense").sort((e,o)=>e.name.localeCompare(o.name)));return O(()=>{m()}),(e,o)=>(d(),v(N,{pageTitle:"Categories",isSubNav:""},{default:C(()=>[i(k,{type:"Income",categories:l.value,onForm:o[0]||(o[0]=y=>a(y)),onDelete:o[1]||(o[1]=y=>t(y))},null,8,["categories"]),i(k,{type:"Expense",categories:s.value,onForm:o[2]||(o[2]=y=>a(y)),onDelete:o[3]||(o[3]=y=>t(y))},null,8,["categories"]),i(A,{icon:_(I),onClick:a},null,8,["icon"]),i(R,{category:u.value,onClose:p},null,8,["category"]),i(X,{category:u.value,onClose:p},null,8,["category"])]),_:1}))}};export{me as default};
